<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        const scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          const element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          const newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((_entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>fsparc.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>fsparc</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/index-3OIHLLq_.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/preload-helper-g1IWzEZ-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chunk-LvLJmgfZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/react-XTZdWHwa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/compiler-runtime-QczY1yfQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useEventListener-4mpeqPxW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/react-dom-BZDtXk6t.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/jsx-runtime-DUsrKwmN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Combination-D2HqSOvH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/clsx-FpJB9huX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cn-Cs2e4A8T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/menu-items-B57SjdWM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/hotkeys-Dh4gy4JD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/button-D8mnDDLX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-Dj-O1Spr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/createLucideIcon-BJ2I6csQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/check-CWbw3kKW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/select-CgZgQ5hV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/multi-map-D3NvLiI9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chevron-right-B_qBg_RU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dropdown-menu-Ciqx4yT-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tooltip-DqNvr2Rw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_Uint8Array-BGESiCQL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_getTag-BWqNuuwU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseIsEqual-C8v2yRqO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/jotai-D74Ef_p1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/invariant-Amh6wt4N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/isArrayLikeObject-BkJc8lDE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/merge-5YNOh9ZD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/zod-BBqism5D.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/utils-x9KlwLm7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/requests-THIDPq-F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/once-BxRirs3K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toDate-Y5T6FHPx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/isSymbol-BGkTcW3U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toString-DlRqgfqz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseSlice-BoaxdS7L.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_hasUnicode-CNlKPr15.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useLifecycle-8fgb5Nue.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/capitalize-L9-XHPtm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ai-model-dropdown-CO52rzQt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/badge-Cm0WUI-_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/use-toast-DKTyV2AR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/constants-BmIIVBf_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Deferred-9HYzcD3r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/config-CbG7e0K6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/uuid-B8w6pjWV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/DeferredRequestRegistry-DfLQSvoS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/connection-B11rCPnY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useNonce-D8CLFIrY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/capabilities-Bdlrhekp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/createReducer-VgoBNe3M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-C3a_7WFa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-0z0sEYV-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BzfTz_Dx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DmruaXMM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DU0YrNRK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-_bGPtAsk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DsSBESho.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-B2TjmP7E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BzDb7E9f.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/stex-C4ZxI0N3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cjs-Ba5CQnxe.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_arrayReduce-DdxhySYh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/type-kFt-n-jZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseProperty-D0ckTA0L.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toNumber-GB_lFVaq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/now-CAWn5i9V.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/debounce-Bgq-wc7M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toInteger-Cl1doThW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/main-CC_mbgxK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cells-DoKM12vd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/kbd-EdFdwHEs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/renderShortcut-CLenKJO6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useEvent-l9BzRqpK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDeleteCell-BDBSmjLV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/lazy-Cbg8zRvU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/defaultLocale-8c1ixjJ_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/precisionRound-CQhbsDNz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/defaultLocale-BECdiY5x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vega-loader.browser-DZ31-605.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tooltip-CSAGVmjx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ErrorBoundary-6EjkHrSV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/alert-dialog-D9SwG8oA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dialog-BPIq0Dmw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDebounce-C9S6xmGh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/numbers-BigybruE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/SSRProvider-DlZbKHsu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/context-CO64Gasq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useNumberFormatter-B5HAJDUq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/usePress-DHxqjtDm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/input-CVoLDDk-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ImperativeModal-ameyIrhc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cell-link-BiAu_8pk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/alert-D5BMn3Et.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/links-Iv0WhyKW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/state-i7G4J1VS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/MarimoErrorOutput-Bh7Bgl2Z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/copy-BS3uwoaq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/copy-DhmkXAPp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/copy-icon-Lyk2_Z8G.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/spinner-DpaQpaiI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-D1pae9A2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/focus-CyxSol0W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/popover-DZBXSGEz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useRunCells-DT1En-Te.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mode-DKDAYLK9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/purify.es-hXMlfS4W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/RenderHTML-Dlz0Ew2i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/table-CesNYRF-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tabs-BjAbB8w_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/add-missing-import-DV1FOw9w.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useAsyncData-_-DLduEH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useIframeCapabilities-r0LQMxAQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/LazyAnyLanguageCodeMirror-C7KtNlRp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/error-banner-C9tkg1MX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/formats-C3exma5i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useTheme-DpA-8Qyy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/en-US-Lc4gASCJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/isValid-Cd_L_2Pm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/maps-D4abje2p.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/shim-D-ElLTBO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/download-CCvBQ7qL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/extends-C2lJEiP_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/emotion-is-prop-valid.esm-c4A1huxA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDateFormatter-BMdQ9MI_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/katex-BmfUoCWW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/marked.esm-idL59iHw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chunk-T7OEMACY-CdGEwedE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/range-Bbli-TEL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/table-kHJ0xpFt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Output-DxdWGPFi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/name-cell-input-C6ZYU6mN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useHotkey-B0ylhc2m.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CqHWOZu2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BcLYYUSi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BVXr6b5T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BrEX5EQl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CalRK9ms.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-Cc4T7UUX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-D3MC5WiF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DgaCIZAa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-rqHtY98i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-tj-jaP-y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-w7c0BKrD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CCZcRJI9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CrDb6akR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/apl-BQt6lLuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/asciiarmor-BjX7bs0j.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/asn1-xn1MtyoW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/brainfuck-BjO-UY1i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/clike-DW9tQWfF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/clojure-BSW96HRx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cmake-C7UlMfz3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cobol-CyWIev3Y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/coffeescript-DTvziYTK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/commonlisp-yMdkdGMi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/crystal-BGnoSp3z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/css-D7fWzevp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cypher-Cr1dl0Qf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/d-C2bS5bA6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/diff-B2mHQyn6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dtd-Cy-lUE7p.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dylan-mm60grwk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ecl-Cqi05Wy1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/eiffel-FkvfLQq7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/elm-Da5txHw0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/erlang-CdnCEH5x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/simple-mode-B185hCuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/factor-CamlR8EJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/forth-UcMX0m31.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/fortran-DZ_vNVsP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/gas-CM88o6Zj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/gherkin-BhrpTeN9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/groovy-BFju68Wx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/haskell-CrWHY4et.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/haxe-1eKW-tbO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/idl-Do4AwvU2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/javascript-CTXZKRYd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/julia-BRynwHI4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/livescript-ZmIBNA-I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/lua-mUfZ-MRC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mathematica-Dil5dTHO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mbox-Dnkn9wSr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mirc-auEWieOB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mllike-xVJsauJ8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/modelica-B8kajVDm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mscgen-Bsnta1jn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mumps-CMw16b5q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/nsis-DwPdi8sw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ntriples-O5lQxirn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/octave-CMfAar-E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/oz-CLRI9Qww.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pascal-D2M_3HBx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/perl-B8lV7aKt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pig-Bima2bfE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/powershell-v_t41ydu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/properties-ChrStSby.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/protobuf-Bin6kmlf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pug-UWVdYLYW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/puppet-DYrtWvYn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/python-BuKrulde.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/q-CrXUTiVN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/r-Bk2Tiso2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/rpm-CmmZphz3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ruby-ElyOTVeQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/sas-jE3ZlG0K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/scheme-CZF1tRbv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/shell-LqT3ZqMa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/sieve-y15yT7Pp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/smalltalk-pk5PvsMs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/sparql-DTZ_gfPQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/stylus-CrGj0eNT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/swift-tt3PlBbI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tcl-1P4b0GMJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/textile-BHDIuMYh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toml-C8qoqk_i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/troff-DMiF5Zmz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ttcn-cfg-qLZtNU-E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ttcn-BAUp3RZn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/turtle-BizIwmKv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vb-Bn_uCxNL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vbscript-BTKW8Atx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/velocity-CcB05fpi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/verilog-BWdtOJH8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vhdl-CzFOaOHx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/webidl-DDEKCqSy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/xquery-BcF6ZhQP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/yacas-BARQAiXa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/z80-DO_Ep0iT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/esm-DnNh7vdQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/objectWithoutPropertiesLoose-DDabolgJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/esm-Crqxhl3F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/trash-Df8Wb7xS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ConsoleOutput-D8ETq-cc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/icons-BgmgMjOV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/blob-LiDbeYko.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/add-cell-with-ai-85tnyxYo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chart-no-axes-column-BrQ3B3xc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/square-function-D5EEjILG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/spec-DpllSlJD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useInstallPackage-BaAhpZlP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/column-preview-DGBk0umL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useAddCell-DYfGo4T8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toggle-PGHtwx2G.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/api-CoLss8_O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/globals-oV9pRUSB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/share-DjbnD3WE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/memoize-DN0TMY36.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/get-CyLJYAfP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseSet-CKSmZC_I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/utilities.esm-DvrcU9Ky.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/floating-outline-DmCT2Mvg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/eye-off-BUwXWtH0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/plus-CiGrWbgb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/readonly-python-code-CkaJ4Tks.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/file-video-camera-BGBfFNDn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/file-text-O5IflCIn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/file-CqXxt3_J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/types-BMriRmf-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/label-4Nancvon.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/textarea-BnZHy5Jt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/circle-x-Cc9X6U_B.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/refresh-ccw-aU2rUkrI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/trash-2-Du5ITnDv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/form-600t_Civ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/field-Dov6YyOV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/switch-Ct8mUApv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useBoolean-Dmwks1uh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDeepCompareMemoize-C8RdAYFq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/types-D0WVpW93.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/prop-types-WJwGTMoZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/es-DAmFxw3U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/VisuallyHidden-RqykLBKh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseFlatten-rM2FaX4x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/hasIn-CE-pxQP-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_basePickBy-LbasZ8ix.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pick-FbHfDtcJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/send-LAFRRDPT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/code-xml-DdSOsi73.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/download-Dmmu2U4a.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/globe-vMZtva7z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/refresh-cw-BOc7UXm9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/settings-DznrHqbd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/square-DhlBDqyx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/triangle-alert-Bf1kg4xT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DL3W3q-2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/bundle.esm-C-9IAWQU.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cells-wU8qigWB.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Output-DUep6sC9.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ConsoleOutput-BFFTcC5Y.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/index-CJU5NUvF.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "fsparc.py",
            "mode": "read",
            "version": "0.18.4",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "below", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "medium", "reference_highlighting": false, "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"sql_output": "auto", "width": "compact"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "mo.md(r\"\"\"![MOSEK ApS](https://www.mosek.com/static/images/branding/webgraphmoseklogocolor.png )\"\"\")", "code_hash": "271c93fd1913447fc8645725a5909adb", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hbol", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\nWe implement a Python Fusion model for the problem known as F-SPARC (fractional subcarrier and power allocation with rate constraints). Our implementation defines a mixed-integer exponential cone problem.\n\nThe model comes from the paper *Bi-Perspective Functions for Mixed-Integer Fractional Programs with Indicator Variables* by Adam N. Letchford, Qiang N and, Zhaoyu Zhong, http://www.optimization-online.org/DB_HTML/2017/09/6222.html.\n\nSome test data come from http://www.research.lancs.ac.uk/portal/en/datasets/ofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html\n\n# Problem formulation\n\nWe consider a set $I$ of communication channels (subcarriers) to be assigned to a set $J$ of users. Each channel can be assigned to at most one user, while one user will typically have more channels assigned to them, subject to the requirement that user $j$ achieves a total data rate of at least $d_j$ (bits per second). The data rate of a channel is computed as follows: for a channel of bandwidth $B$ (hertz), noise level $N_i$ (watts) and operating with power $p_i$ (watts), the maximum data rate is\n$$f_i = B \\log_2(1+\\frac{p_i}{N_i}).$$\n\nFinally, we assume a minimal system power of $\\sigma$ required to keep the system running and a maximum power level $P$. \n\nThe goal is to map the channels to users and assign their power levels so that the *energy efficiency*\n\n$$\\frac{\\textrm{total data rate}}{\\textrm{total power}}$$\nis maximized.\n\nThe mixed-integer formulation is then:\n\n$$\n\\begin{array}{rl}\n\\mathrm{maximize} \u0026 \\frac{\\sum_{i,j} B \\log_2(1+p_{i,j}/N_i)}{\\sigma+\\sum_{i,j}p_{i,j}} \\\\\n\\textrm{subject to} \u0026 B \\sum_i \\log_2(1+p_{i,j}/N_i) \\geq d_j, \\quad j\\in J, \\\\\n\u0026 \\sigma + \\sum_{i,j}p_{ij} \\leq P, \\\\\n\u0026 0 \\leq p_{ij}\\leq Px_{ij}, x_{ij}\\in \\{0,1\\}, \\\\\n\u0026 \\sum_j x_{ij} \\leq 1,\\quad i\\in I,\n\\end{array}\n$$\n\nwhere $p_{ij}$ is the power assigned to channel $i$ when used by user $j$. The first constraint describes the total bitrate of each user, the second bounds total power, and the remaining constraints with indicator variables model the assignment requirements.\n\n\n# Conic reformulation\n\nTo obtain a problem in conic form we perform a homogenization as in [Section 5.2 of Letchfort et al.](https://optimization-online.org/2017/09/6222/). That is, we introduce new variables $t$, $z_{ij}$ and $\\tilde{p_{ij}}$ with the intention of representing\n\n$$t = 1/(\\sigma+\\sum_{ij}p_{ij}),\\quad z_{ij}=Bt\\log_2(1+p_{ij}/N_i),\\quad \\tilde{p_{ij}} = p_{ij}t.$$\n\nIn terms of the new variables the problem is equivalent with\n\n$$\n\\begin{array}{rl}\n\\mathrm{maximize} \u0026 \\sum_{i,j} z_{ij} \\\\\n\\textrm{subject to} \u0026 z_{ij} \\leq B t \\log_2(1+\\tilde{p_{i,j}}/(tN_i)), \\quad i \\in I, j\\in J, \\\\\n\u0026 d_jt \\leq \\sum_i z_{ij},\\quad j\\in J \\\\\n\u0026 t\\sigma + \\sum_{i,j} \\tilde{p_{i,j}} = 1, \\\\\n\u0026 1/P \\leq t \\leq 1/\\sigma, \\\\\n\u0026 0 \\leq \\tilde{p_{i,j}} \\leq x_{ij}, x_{ij}\\in \\{0,1\\}, \\\\\n\u0026 \\sum_j x_{ij} \\leq 1,\\quad i\\in I,\n\\end{array}\n$$\n\nThe first constraint can equivalently be written as\n$$t+\\tilde{p_{i,j}}/N_i \\geq t \\exp(\\log(2)z_{i,j}/(Bt))$$\nwhich, using the exponential cone, is\n\n$$(t+\\tilde{p_{i,j}}/N_i , t, \\log(2)z_{i,j}/B)\\in K_\\mathrm{exp}.$$\n\n# Implementation in Fusion\n\nWe start that functions which parse examples in the format of http://www.research.lancs.ac.uk/portal/en/datasets/ofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html and set up some global constants. The data files contain user demands and channel noise for each example.\n\"\"\"\n)", "code_hash": "114e57c3f29d2a68cfb538450c7e5a64", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "MJUe", "name": "_"}, {"code": "# marimo: preserve-names\nimport ast, sys\n\nconstants = {\n  \"System Power\": 10, \n  \"Bandwidth\": 1.25, \n  \"Maximum Power\": 36\n}\n\ndef parse(filename):\n    data = []\n    with open(filename, 'r') as file:\n        content = file.read()\n        if 'Instance: ' not in content: raise Exception\n\n        for inst in content.split('Instance: ')[1:]:\n            if 'noise' not in inst or 'demand' not in inst: raise Exception\n\n            data.append({\n                \"noise\" : ast.literal_eval(inst.split('noise')[1].split('demand')[0].strip()), \n                \"demand\" : ast.literal_eval(inst.split('demand')[1].strip())\n            })\n    return data \n\nBW = constants[\"Bandwidth\"]\nP = constants[\"Maximum Power\"]\nSIGMA = constants[\"System Power\"]", "code_hash": "d217906077b875d339f339f89c9d7b31", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "vblA", "name": "_"}, {"code": "mo.md(r\"\"\"The next function is a direct implementation of the conic model above.\"\"\")", "code_hash": "662ffe9980082f783b94561e1f12c5d9", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "bkHC", "name": "_"}, {"code": "from mosek.fusion import Model, Domain, Expr, ObjectiveSense, Matrix, Var, SolutionStatus,  AccSolutionStatus\nimport mosek.fusion.pythonic\nfrom math import log\n\ndef fsparc_model(n, d):\n    M = Model()\n    I, J = (len(n), len(d))\n    z = M.variable('z', [I, J], Domain.greaterThan(0.0))\n    x = M.variable('x', [I, J], Domain.binary())\n    p_tilde = M.variable('p_tilde', [I, J], Domain.greaterThan(0.0))\n    t = M.variable('t', 1, Domain.inRange(1.0 / P, 1.0 / SIGMA))\n    M.constraint(Expr.sum(x, 1) \u003C= 1.0)\n    M.constraint(SIGMA * t + Expr.sum(p_tilde) == 1.0)\n    M.constraint(p_tilde \u003C= x)\n    M.constraint(Expr.sum(z, 0) \u003E= Expr.mulElm(Expr.repeat(t, J, 0), d))\n    M.objective('obj', ObjectiveSense.Maximize, Expr.sum(z))\n    p_over_n = Expr.mulElm(p_tilde, [[1 / n_i] * J for n_i in n])\n    multi_t = Expr.repeat(Expr.repeat(t, I, 0), J, 1)\n    M.constraint(Expr.stack(2, multi_t + p_over_n, multi_t, z * (log(2.0) / BW)), Domain.inPExpCone())\n    return M", "code_hash": "d987663cc000aaaa465cdba872f191dd", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "lEQa", "name": "_"}, {"code": "mo.md(r\"\"\"Next we run the model and present some statistics for a few examples.\"\"\")", "code_hash": "e445128c27c5d566bd039611e43d9fe0", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "PKri", "name": "_"}, {"code": "import matplotlib.pyplot as plt\n\ndef stats(M, n, d):\n    I, J = (len(n), len(d))\n    t = M.getVariable('t').level()[0]\n    pval = M.getVariable('p_tilde').level().reshape([I, J]) / t\n    xval = M.getVariable('x').level().reshape([I, J])\n    power = [sum(pval[i, :]) for i in range(I)]\n    user = [int(sum([xval[i][j] * j for j in range(J)])) for i in range(I)]\n    print('Total data rate: demanded {0}, provided {1}'.format(sum(d), sum([BW * log(1 + power[i] / n[i]) / log(2.0) for i in range(I)])))\n    print('Power: system {0:.3f}, used {1:.3f}, maximal: {2:.3f}'.format(SIGMA, SIGMA + sum(power), P))\n    colors = ['red', 'green', 'blue', 'cyan', 'yellow', 'violet']\n    plt.bar(range(I), power, color=[colors[user[i]] for i in range(I)])", "code_hash": "f2b5d2ca20d2d93bcec2008d4c8ed8bf", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Xref", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n# Example 1\n\nWe run an example with realistic data (72 channels, 4 users) with a very short time limit.\n\"\"\"\n)", "code_hash": "a7a328ed78def29db6aac89a73f3c11b", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "SFPL", "name": "_"}, {"code": "def _():\n    _instance = parse('data/lancaster/4_0.8.txt')[0]\n    n, d = (_instance['noise'], _instance['demand'])\n    M = fsparc_model(n, d)\n    M.setLogHandler(sys.stdout)\n    M.setSolverParam('optimizerMaxTime', 40.0)\n    M.solve()\n    M.acceptedSolutionStatus(AccSolutionStatus.Feasible)\n\n    print(M.getPrimalSolutionStatus())\n    return stats(M, n, d)\n\n_()", "code_hash": "0a583eae7165f27ee173e92f31260c3a", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "BYtC", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\nThe bar plot shows power assignments to the channels. Each color represents one user.\n\n# Example 2\n\nThe next example is a small, randomly generated set of data with 15 channels and 3 users, which we should solve to optimality.\n\"\"\"\n)", "code_hash": "7b946cd3baa5d9c73646d5518efeec72", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "RGSE", "name": "_"}, {"code": "_instance = parse('data/small-random/random_15_3_0.85.txt')[0]\nn, d = (_instance['noise'], _instance['demand'])\nM = fsparc_model(n, d)\nM.setLogHandler(sys.stdout)\nM.solve()\nstats(M, n, d)", "code_hash": "4ac815ae28ea420617c2abb665d597a9", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Kclp", "name": "_"}, {"code": "mo.md(r\"\"\"\u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003E\u003Cimg alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/80x15.png\" /\u003E\u003C/a\u003E\u003Cbr /\u003EThis work is licensed under a \u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003ECreative Commons Attribution 4.0 International License\u003C/a\u003E. The **MOSEK** logo and name are trademarks of \u003Ca href=\"http://mosek.com\"\u003EMosek ApS\u003C/a\u003E. The code is provided as-is. Compatibility with future release of **MOSEK** or the `Fusion API` are not guaranteed. For more information contact our [support](mailto:support@mosek.com).\"\"\")", "code_hash": "1457d7ea0ad46d737c6d62314b6b464a", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "emfo", "name": "_"}, {"code": "import marimo as mo", "code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hstk", "name": "_"}], "metadata": {"marimo_version": "0.18.4"}, "version": "1"},
            "session": {"cells": [{"code_hash": "271c93fd1913447fc8645725a5909adb", "console": [], "id": "Hbol", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cimg alt=\"MOSEK ApS\" src=\"https://www.mosek.com/static/images/branding/webgraphmoseklogocolor.png\" /\u003E\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "114e57c3f29d2a68cfb538450c7e5a64", "console": [], "id": "MJUe", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003EWe implement a Python Fusion model for the problem known as F-SPARC (fractional subcarrier and power allocation with rate constraints). Our implementation defines a mixed-integer exponential cone problem.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe model comes from the paper \u003Cem\u003EBi-Perspective Functions for Mixed-Integer Fractional Programs with Indicator Variables\u003C/em\u003E by Adam N. Letchford, Qiang N and, Zhaoyu Zhong, \u003Ca href=\"http://www.optimization-online.org/DB_HTML/2017/09/6222.html\" rel=\"noopener noreferrer\" target=\"_blank\"\u003Ehttp://www.optimization-online.org/DB_HTML/2017/09/6222.html\u003C/a\u003E.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003ESome test data come from \u003Ca href=\"http://www.research.lancs.ac.uk/portal/en/datasets/ofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html\" rel=\"noopener noreferrer\" target=\"_blank\"\u003Ehttp://www.research.lancs.ac.uk/portal/en/datasets/ofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html\u003C/a\u003E\u003C/span\u003E\n\u003Ch1 id=\"problem-formulation\"\u003EProblem formulation\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003EWe consider a set \u003Cmarimo-tex class=\"arithmatex\"\u003E||(I||)\u003C/marimo-tex\u003E of communication channels (subcarriers) to be assigned to a set \u003Cmarimo-tex class=\"arithmatex\"\u003E||(J||)\u003C/marimo-tex\u003E of users. Each channel can be assigned to at most one user, while one user will typically have more channels assigned to them, subject to the requirement that user \u003Cmarimo-tex class=\"arithmatex\"\u003E||(j||)\u003C/marimo-tex\u003E achieves a total data rate of at least \u003Cmarimo-tex class=\"arithmatex\"\u003E||(d_j||)\u003C/marimo-tex\u003E (bits per second). The data rate of a channel is computed as follows: for a channel of bandwidth \u003Cmarimo-tex class=\"arithmatex\"\u003E||(B||)\u003C/marimo-tex\u003E (hertz), noise level \u003Cmarimo-tex class=\"arithmatex\"\u003E||(N_i||)\u003C/marimo-tex\u003E (watts) and operating with power \u003Cmarimo-tex class=\"arithmatex\"\u003E||(p_i||)\u003C/marimo-tex\u003E (watts), the maximum data rate is\n\u003Cmarimo-tex class=\"arithmatex\"\u003E||(\u003Cmarimo-tex class=\"arithmatex\"\u003E||(f_i = B \\log_2(1+\\frac{p_i}{N_i}).||)\u003C/marimo-tex\u003E||)\u003C/marimo-tex\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EFinally, we assume a minimal system power of \u003Cmarimo-tex class=\"arithmatex\"\u003E||(\\sigma||)\u003C/marimo-tex\u003E required to keep the system running and a maximum power level \u003Cmarimo-tex class=\"arithmatex\"\u003E||(P||)\u003C/marimo-tex\u003E.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe goal is to map the channels to users and assign their power levels so that the \u003Cem\u003Eenergy efficiency\u003C/em\u003E\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003E\u003Cmarimo-tex class=\"arithmatex\"\u003E||(\u003Cmarimo-tex class=\"arithmatex\"\u003E||(\\frac{\\textrm{total data rate}}{\\textrm{total power}}||)\u003C/marimo-tex\u003E||)\u003C/marimo-tex\u003E\nis maximized.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThe mixed-integer formulation is then:\u003C/span\u003E\n\u003Cmarimo-tex class=\"arithmatex\"\u003E||[\n\\begin{array}{rl}\n\\mathrm{maximize} \u0026amp; \\frac{\\sum_{i,j} B \\log_2(1+p_{i,j}/N_i)}{\\sigma+\\sum_{i,j}p_{i,j}} \\\\\n\\textrm{subject to} \u0026amp; B \\sum_i \\log_2(1+p_{i,j}/N_i) \\geq d_j, \\quad j\\in J, \\\\\n\u0026amp; \\sigma + \\sum_{i,j}p_{ij} \\leq P, \\\\\n\u0026amp; 0 \\leq p_{ij}\\leq Px_{ij}, x_{ij}\\in \\{0,1\\}, \\\\\n\u0026amp; \\sum_j x_{ij} \\leq 1,\\quad i\\in I,\n\\end{array}\n||]\u003C/marimo-tex\u003E\u003Cspan class=\"paragraph\"\u003Ewhere \u003Cmarimo-tex class=\"arithmatex\"\u003E||(p_{ij}||)\u003C/marimo-tex\u003E is the power assigned to channel \u003Cmarimo-tex class=\"arithmatex\"\u003E||(i||)\u003C/marimo-tex\u003E when used by user \u003Cmarimo-tex class=\"arithmatex\"\u003E||(j||)\u003C/marimo-tex\u003E. The first constraint describes the total bitrate of each user, the second bounds total power, and the remaining constraints with indicator variables model the assignment requirements.\u003C/span\u003E\n\u003Ch1 id=\"conic-reformulation\"\u003EConic reformulation\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003ETo obtain a problem in conic form we perform a homogenization as in \u003Ca href=\"https://optimization-online.org/2017/09/6222/\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ESection 5.2 of Letchfort et al.\u003C/a\u003E. That is, we introduce new variables \u003Cmarimo-tex class=\"arithmatex\"\u003E||(t||)\u003C/marimo-tex\u003E, \u003Cmarimo-tex class=\"arithmatex\"\u003E||(z_{ij}||)\u003C/marimo-tex\u003E and \u003Cmarimo-tex class=\"arithmatex\"\u003E||(\\tilde{p_{ij}}||)\u003C/marimo-tex\u003E with the intention of representing\u003C/span\u003E\n\u003Cmarimo-tex class=\"arithmatex\"\u003E||[t = 1/(\\sigma+\\sum_{ij}p_{ij}),\\quad z_{ij}=Bt\\log_2(1+p_{ij}/N_i),\\quad \\tilde{p_{ij}} = p_{ij}t.||]\u003C/marimo-tex\u003E\u003Cspan class=\"paragraph\"\u003EIn terms of the new variables the problem is equivalent with\u003C/span\u003E\n\u003Cmarimo-tex class=\"arithmatex\"\u003E||[\n\\begin{array}{rl}\n\\mathrm{maximize} \u0026amp; \\sum_{i,j} z_{ij} \\\\\n\\textrm{subject to} \u0026amp; z_{ij} \\leq B t \\log_2(1+\\tilde{p_{i,j}}/(tN_i)), \\quad i \\in I, j\\in J, \\\\\n\u0026amp; d_jt \\leq \\sum_i z_{ij},\\quad j\\in J \\\\\n\u0026amp; t\\sigma + \\sum_{i,j} \\tilde{p_{i,j}} = 1, \\\\\n\u0026amp; 1/P \\leq t \\leq 1/\\sigma, \\\\\n\u0026amp; 0 \\leq \\tilde{p_{i,j}} \\leq x_{ij}, x_{ij}\\in \\{0,1\\}, \\\\\n\u0026amp; \\sum_j x_{ij} \\leq 1,\\quad i\\in I,\n\\end{array}\n||]\u003C/marimo-tex\u003E\u003Cspan class=\"paragraph\"\u003EThe first constraint can equivalently be written as\n\u003Cmarimo-tex class=\"arithmatex\"\u003E||(\u003Cmarimo-tex class=\"arithmatex\"\u003E||(t+\\tilde{p_{i,j}}/N_i \\geq t \\exp(\\log(2)z_{i,j}/(Bt))||)\u003C/marimo-tex\u003E||)\u003C/marimo-tex\u003E\nwhich, using the exponential cone, is\u003C/span\u003E\n\u003Cmarimo-tex class=\"arithmatex\"\u003E||[(t+\\tilde{p_{i,j}}/N_i , t, \\log(2)z_{i,j}/B)\\in K_\\mathrm{exp}.||]\u003C/marimo-tex\u003E\u003Ch1 id=\"implementation-in-fusion\"\u003EImplementation in Fusion\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003EWe start that functions which parse examples in the format of \u003Ca href=\"http://www.research.lancs.ac.uk/portal/en/datasets/ofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html\" rel=\"noopener noreferrer\" target=\"_blank\"\u003Ehttp://www.research.lancs.ac.uk/portal/en/datasets/ofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html\u003C/a\u003E and set up some global constants. The data files contain user demands and channel noise for each example.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d217906077b875d339f339f89c9d7b31", "console": [], "id": "vblA", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "662ffe9980082f783b94561e1f12c5d9", "console": [], "id": "bkHC", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003EThe next function is a direct implementation of the conic model above.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "d987663cc000aaaa465cdba872f191dd", "console": [], "id": "lEQa", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "e445128c27c5d566bd039611e43d9fe0", "console": [], "id": "PKri", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003ENext we run the model and present some statistics for a few examples.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "f2b5d2ca20d2d93bcec2008d4c8ed8bf", "console": [], "id": "Xref", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "a7a328ed78def29db6aac89a73f3c11b", "console": [], "id": "SFPL", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch1 id=\"example-1\"\u003EExample 1\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003EWe run an example with realistic data (72 channels, 4 users) with a very short time limit.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "0a583eae7165f27ee173e92f31260c3a", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Problem\n  Name                   :                 \n  Objective sense        : maximize        \n  Type                   : CONIC (conic optimization problem)\n  Constraints            : 365             \n  Affine conic cons.     : 288 (864 rows)\n  Disjunctive cons.      : 0               \n  Cones                  : 0               \n  Scalar variables       : 866             \n  Matrix variables       : 0               \n  Integer variables      : 288             \n\nOptimizer started.\nMixed integer optimizer started.\nThreads used: 32\nPresolve started.\nPresolve terminated. Time = 0.03, probing time =  0.02\nPresolved problem: 2881 variables, 2381 constraints, 6629 non-zeros\nPresolved problem: 0 general integer, 288 binary, 2593 continuous\nPresolved problem: 576 cones\nClique table size: 72\nSymmetry factor  : 0.37 (detection time = 0.01)\nBRANCHES RELAXS   ACT_NDS  DEPTH    BEST_INT_OBJ         BEST_RELAX_OBJ       REL_GAP(%)  TIME  \n0        0        1        0        NA                   NA                   NA          0.1   \n0        1        1        0        NA                   1.2900514851e+02     NA          0.3   \nRoot cut generation started.\n0        1        1        0        NA                   1.2900514851e+02     NA          0.7   \nRoot cut generation terminated. Time = 0.20\n11       14       12       3        NA                   1.2827851057e+02     NA          2.1   \n28       31       29       6        NA                   1.2827851057e+02     NA          3.4   \n49       52       50       8        NA                   1.2827851057e+02     NA          5.5   \n66       69       67       9        NA                   1.2827851057e+02     NA          6.1   \n100      103      101      11       NA                   1.2827851057e+02     NA          7.1   \n196      199      197      14       NA                   1.2827851057e+02     NA          9.4   \n388      391      389      20       NA                   1.2827851057e+02     NA          13.2  \n772      775      773      32       NA                   1.2827851057e+02     NA          21.0  \n1421     1424     1422     54       NA                   1.2827851057e+02     NA          31.0  \n2188     2191     2179     76       9.6274520490e+01     1.2827851057e+02     33.24       36.4  \n\nObjective of best integer solution : 9.627452048957e+01      \nBest objective bound               : 1.268935301195e+02      \nInitial feasible solution objective: Undefined\nConstruct solution objective       : Not employed\nUser objective cut value           : Not employed\nNumber of cuts generated           : 0\nNumber of branches                 : 2188\nNumber of relaxations solved       : 2191\nNumber of interior point iterations: 55766\nNumber of simplex iterations       : 0\nTime spend presolving the root     : 0.03\nTime spend optimizing the root     : 0.40\nMixed integer optimizer terminated. Time: 40.01\n\nOptimizer terminated. Time: 40.13   \n\n\nInteger solution solution summary\n  Problem status  : PRIMAL_FEASIBLE\n  Solution status : PRIMAL_FEASIBLE\n  Primal.  obj: 9.6274520490e+01    nrm: 2e+00    Viol.  con: 5e-09    var: 0e+00    acc: 0e+00    itg: 0e+00  \nSolutionStatus.Feasible\nTotal data rate: demanded 1144.5349999999999, provided 1150.077020274276\nPower: system 10.000, used 11.946, maximal: 36.000\n", "type": "stream"}], "id": "BYtC", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "7b946cd3baa5d9c73646d5518efeec72", "console": [], "id": "RGSE", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003EThe bar plot shows power assignments to the channels. Each color represents one user.\u003C/span\u003E\n\u003Ch1 id=\"example-2\"\u003EExample 2\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003EThe next example is a small, randomly generated set of data with 15 channels and 3 users, which we should solve to optimality.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4ac815ae28ea420617c2abb665d597a9", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "Problem\n  Name                   :                 \n  Objective sense        : maximize        \n  Type                   : CONIC (conic optimization problem)\n  Constraints            : 64              \n  Affine conic cons.     : 45 (135 rows)\n  Disjunctive cons.      : 0               \n  Cones                  : 0               \n  Scalar variables       : 137             \n  Matrix variables       : 0               \n  Integer variables      : 45              \n\nOptimizer started.\nMixed integer optimizer started.\nThreads used: 32\nPresolve started.\nPresolve terminated. Time = 0.01, probing time =  0.00\nPresolved problem: 451 variables, 379 constraints, 1039 non-zeros\nPresolved problem: 0 general integer, 45 binary, 406 continuous\nPresolved problem: 90 cones\nClique table size: 15\nBRANCHES RELAXS   ACT_NDS  DEPTH    BEST_INT_OBJ         BEST_RELAX_OBJ       REL_GAP(%)  TIME  \n0        0        1        0        NA                   NA                   NA          0.0   \n0        1        1        0        NA                   2.7818565655e+01     NA          0.1   \n0        1        1        0        1.7135777425e+01     2.7818565655e+01     62.34       0.2   \nRoot cut generation started.\n0        1        1        0        1.7135777425e+01     2.7818565655e+01     62.34       0.3   \nRoot cut generation terminated. Time = 0.04\n8        11       9        2        2.0038791853e+01     2.7785036000e+01     38.66       0.6   \n21       25       16       5        2.0038791853e+01     2.7785036000e+01     38.66       0.9   \n34       38       21       7        2.0038791853e+01     2.7785036000e+01     38.66       0.9   \n50       54       25       9        2.0038791853e+01     2.7785036000e+01     38.66       1.1   \n70       74       37       2        2.0038791853e+01     2.7644844987e+01     37.96       1.2   \n84       88       33       3        2.0038791853e+01     2.7644844987e+01     37.96       1.2   \n99       103      40       4        2.0038791853e+01     2.7644844987e+01     37.96       1.3   \n113      117      42       5        2.0038791853e+01     2.7644844987e+01     37.96       1.3   \n130      135      45       11       2.0038791853e+01     2.7644844987e+01     37.96       1.4   \n147      152      56       12       2.0038791853e+01     2.7644844987e+01     37.96       1.5   \n166      171      59       5        2.0038791853e+01     2.7644844987e+01     37.96       1.6   \n189      194      58       6        2.0038791853e+01     2.7644844987e+01     37.96       1.6   \n212      218      63       3        2.0038791853e+01     2.7360543978e+01     36.54       1.8   \n235      241      68       4        2.0038791853e+01     2.7360543978e+01     36.54       1.9   \n282      288      75       5        2.0038791853e+01     2.7360543978e+01     36.54       2.1   \n341      347      88       7        2.0630150961e+01     2.7360543978e+01     32.62       2.2   \n401      392      88       9        2.0630150961e+01     2.7360543978e+01     32.62       2.4   \n463      448      102      11       2.0630150961e+01     2.7360543978e+01     32.62       2.6   \n554      537      119      13       2.0727904974e+01     2.7360543978e+01     32.00       2.8   \n647      628      140      15       2.0727904974e+01     2.7360543978e+01     32.00       3.0   \n772      753      175      13       2.0727904974e+01     2.7360543978e+01     32.00       3.3   \n927      908      174      8        2.0727904974e+01     2.6386470536e+01     27.30       3.5   \n1080     1059     159      12       2.0727904974e+01     2.6386470536e+01     27.30       3.9   \n1202     1182     173      15       2.0727904974e+01     2.6386470536e+01     27.30       4.2   \n1360     1341     197      10       2.0727904974e+01     2.6386456037e+01     27.30       4.6   \n1548     1529     223      12       2.0727904974e+01     2.6386456037e+01     27.30       4.9   \n1736     1717     229      18       2.0886135805e+01     2.6386456037e+01     26.33       5.2   \n1958     1934     229      16       2.0886135805e+01     2.6000259191e+01     24.49       5.8   \n2174     2145     209      19       2.0886135805e+01     2.6000259191e+01     24.49       6.0   \n2356     2325     199      15       2.0886135805e+01     2.5667536893e+01     22.89       6.3   \n2538     2506     147      18       2.0886135805e+01     2.5667536893e+01     22.89       6.5   \n2662     2629     149      19       2.0886135805e+01     2.5667535257e+01     22.89       6.6   \n2788     2755     133      24       2.0886135805e+01     2.5667535257e+01     22.89       6.8   \n2905     2872     104      27       2.0886135805e+01     2.5667535257e+01     22.89       6.9   \n2992     2960     89       16       2.0886243529e+01     2.5322992525e+01     21.24       7.0   \n3054     3023     83       17       2.0886243529e+01     2.5019582420e+01     19.79       7.1   \n3114     3083     63       19       2.0886243529e+01     2.5019582420e+01     19.79       7.2   \n3145     3114     58       20       2.0886243529e+01     2.5019582420e+01     19.79       7.2   \n3170     3139     47       18       2.0886243529e+01     2.5019582420e+01     19.79       7.2   \n3192     3161     39       18       2.0886243529e+01     2.4844861217e+01     18.95       7.3   \n3208     3177     33       19       2.0886243529e+01     2.4844861217e+01     18.95       7.3   \n3221     3190     34       19       2.0886243529e+01     2.4737447381e+01     18.44       7.3   \n3232     3201     37       20       2.0886243529e+01     2.4737447381e+01     18.44       7.4   \n3245     3214     32       21       2.0886243529e+01     2.4737447381e+01     18.44       7.4   \n3260     3229     29       19       2.0886243529e+01     2.4654850873e+01     18.04       7.4   \n3271     3240     26       20       2.0886243529e+01     2.4654850873e+01     18.04       7.5   \n3282     3251     21       21       2.0886243529e+01     2.4579403436e+01     17.68       7.5   \n3300     3269     15       21       2.0886243529e+01     2.4579403436e+01     17.68       7.5   \n3313     3282     6        23       2.0886243529e+01     2.4579403436e+01     17.68       7.6   \n3324     3293     9        21       2.0886243529e+01     2.4078437585e+01     15.28       7.6   \n3339     3308     6        21       2.0886243529e+01     2.3817412587e+01     14.03       7.8   \nAn optimal solution satisfying the relative gap tolerance of 1.00e-02(%) has been located.\nThe relative gap is 0.00e+00(%).\nAn optimal solution satisfying the absolute gap tolerance of 0.00e+00 has been located.\nThe absolute gap is 0.00e+00.\n\nObjective of best integer solution : 2.088624352860e+01      \nBest objective bound               : 2.088624352860e+01      \nInitial feasible solution objective: Undefined\nConstruct solution objective       : Not employed\nUser objective cut value           : Not employed\nNumber of cuts generated           : 0\nNumber of branches                 : 3345\nNumber of relaxations solved       : 3314\nNumber of interior point iterations: 85825\nNumber of simplex iterations       : 0\nTime spend presolving the root     : 0.01\nTime spend optimizing the root     : 0.10\nMixed integer optimizer terminated. Time: 7.88\n\nOptimizer terminated. Time: 7.92    \n\n\nInteger solution solution summary\n  Problem status  : PRIMAL_FEASIBLE\n  Solution status : INTEGER_OPTIMAL\n  Primal.  obj: 2.0886243529e+01    nrm: 2e+00    Viol.  con: 4e-09    var: 0e+00    acc: 0e+00    itg: 0e+00  \nTotal data rate: demanded 297.7325530926529, provided 301.2209597476948\nPower: system 10.000, used 14.422, maximal: 36.000\n", "type": "stream"}], "id": "Kclp", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "1457d7ea0ad46d737c6d62314b6b464a", "console": [], "id": "emfo", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003E\u003Cimg alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/80x15.png\" /\u003E\u003C/a\u003E\u003Cbr /\u003EThis work is licensed under a \u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003ECreative Commons Attribution 4.0 International License\u003C/a\u003E. The \u003Cstrong\u003EMOSEK\u003C/strong\u003E logo and name are trademarks of \u003Ca href=\"http://mosek.com\"\u003EMosek ApS\u003C/a\u003E. The code is provided as-is. Compatibility with future release of \u003Cstrong\u003EMOSEK\u003C/strong\u003E or the \u003Ccode\u003EFusion API\u003C/code\u003E are not guaranteed. For more information contact our \u003Ca href=\"mailto:support@mosek.com\"\u003Esupport\u003C/a\u003E.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "console": [], "id": "Hstk", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}], "metadata": {"marimo_version": "0.18.4"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.18.4%22%0Aapp%20%3D%20marimo.App()%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20!%5BMOSEK%20ApS%5D(https%3A%2F%2Fwww.mosek.com%2Fstatic%2Fimages%2Fbranding%2Fwebgraphmoseklogocolor.png%20)%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20We%20implement%20a%20Python%20Fusion%20model%20for%20the%20problem%20known%20as%20F-SPARC%20(fractional%20subcarrier%20and%20power%20allocation%20with%20rate%20constraints).%20Our%20implementation%20defines%20a%20mixed-integer%20exponential%20cone%20problem.%0A%0A%20%20%20%20The%20model%20comes%20from%20the%20paper%20*Bi-Perspective%20Functions%20for%20Mixed-Integer%20Fractional%20Programs%20with%20Indicator%20Variables*%20by%20Adam%20N.%20Letchford%2C%20Qiang%20N%20and%2C%20Zhaoyu%20Zhong%2C%20http%3A%2F%2Fwww.optimization-online.org%2FDB_HTML%2F2017%2F09%2F6222.html.%0A%0A%20%20%20%20Some%20test%20data%20come%20from%20http%3A%2F%2Fwww.research.lancs.ac.uk%2Fportal%2Fen%2Fdatasets%2Fofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html%0A%0A%20%20%20%20%23%20Problem%20formulation%0A%0A%20%20%20%20We%20consider%20a%20set%20%24I%24%20of%20communication%20channels%20(subcarriers)%20to%20be%20assigned%20to%20a%20set%20%24J%24%20of%20users.%20Each%20channel%20can%20be%20assigned%20to%20at%20most%20one%20user%2C%20while%20one%20user%20will%20typically%20have%20more%20channels%20assigned%20to%20them%2C%20subject%20to%20the%20requirement%20that%20user%20%24j%24%20achieves%20a%20total%20data%20rate%20of%20at%20least%20%24d_j%24%20(bits%20per%20second).%20The%20data%20rate%20of%20a%20channel%20is%20computed%20as%20follows%3A%20for%20a%20channel%20of%20bandwidth%20%24B%24%20(hertz)%2C%20noise%20level%20%24N_i%24%20(watts)%20and%20operating%20with%20power%20%24p_i%24%20(watts)%2C%20the%20maximum%20data%20rate%20is%0A%20%20%20%20%24%24f_i%20%3D%20B%20%5Clog_2(1%2B%5Cfrac%7Bp_i%7D%7BN_i%7D).%24%24%0A%0A%20%20%20%20Finally%2C%20we%20assume%20a%20minimal%20system%20power%20of%20%24%5Csigma%24%20required%20to%20keep%20the%20system%20running%20and%20a%20maximum%20power%20level%20%24P%24.%0A%0A%20%20%20%20The%20goal%20is%20to%20map%20the%20channels%20to%20users%20and%20assign%20their%20power%20levels%20so%20that%20the%20*energy%20efficiency*%0A%0A%20%20%20%20%24%24%5Cfrac%7B%5Ctextrm%7Btotal%20data%20rate%7D%7D%7B%5Ctextrm%7Btotal%20power%7D%7D%24%24%0A%20%20%20%20is%20maximized.%0A%0A%20%20%20%20The%20mixed-integer%20formulation%20is%20then%3A%0A%0A%20%20%20%20%24%24%0A%20%20%20%20%5Cbegin%7Barray%7D%7Brl%7D%0A%20%20%20%20%5Cmathrm%7Bmaximize%7D%20%26%20%5Cfrac%7B%5Csum_%7Bi%2Cj%7D%20B%20%5Clog_2(1%2Bp_%7Bi%2Cj%7D%2FN_i)%7D%7B%5Csigma%2B%5Csum_%7Bi%2Cj%7Dp_%7Bi%2Cj%7D%7D%20%5C%5C%0A%20%20%20%20%5Ctextrm%7Bsubject%20to%7D%20%26%20B%20%5Csum_i%20%5Clog_2(1%2Bp_%7Bi%2Cj%7D%2FN_i)%20%5Cgeq%20d_j%2C%20%5Cquad%20j%5Cin%20J%2C%20%5C%5C%0A%20%20%20%20%26%20%5Csigma%20%2B%20%5Csum_%7Bi%2Cj%7Dp_%7Bij%7D%20%5Cleq%20P%2C%20%5C%5C%0A%20%20%20%20%26%200%20%5Cleq%20p_%7Bij%7D%5Cleq%20Px_%7Bij%7D%2C%20x_%7Bij%7D%5Cin%20%5C%7B0%2C1%5C%7D%2C%20%5C%5C%0A%20%20%20%20%26%20%5Csum_j%20x_%7Bij%7D%20%5Cleq%201%2C%5Cquad%20i%5Cin%20I%2C%0A%20%20%20%20%5Cend%7Barray%7D%0A%20%20%20%20%24%24%0A%0A%20%20%20%20where%20%24p_%7Bij%7D%24%20is%20the%20power%20assigned%20to%20channel%20%24i%24%20when%20used%20by%20user%20%24j%24.%20The%20first%20constraint%20describes%20the%20total%20bitrate%20of%20each%20user%2C%20the%20second%20bounds%20total%20power%2C%20and%20the%20remaining%20constraints%20with%20indicator%20variables%20model%20the%20assignment%20requirements.%0A%0A%0A%20%20%20%20%23%20Conic%20reformulation%0A%0A%20%20%20%20To%20obtain%20a%20problem%20in%20conic%20form%20we%20perform%20a%20homogenization%20as%20in%20%5BSection%205.2%20of%20Letchfort%20et%20al.%5D(https%3A%2F%2Foptimization-online.org%2F2017%2F09%2F6222%2F).%20That%20is%2C%20we%20introduce%20new%20variables%20%24t%24%2C%20%24z_%7Bij%7D%24%20and%20%24%5Ctilde%7Bp_%7Bij%7D%7D%24%20with%20the%20intention%20of%20representing%0A%0A%20%20%20%20%24%24t%20%3D%201%2F(%5Csigma%2B%5Csum_%7Bij%7Dp_%7Bij%7D)%2C%5Cquad%20z_%7Bij%7D%3DBt%5Clog_2(1%2Bp_%7Bij%7D%2FN_i)%2C%5Cquad%20%5Ctilde%7Bp_%7Bij%7D%7D%20%3D%20p_%7Bij%7Dt.%24%24%0A%0A%20%20%20%20In%20terms%20of%20the%20new%20variables%20the%20problem%20is%20equivalent%20with%0A%0A%20%20%20%20%24%24%0A%20%20%20%20%5Cbegin%7Barray%7D%7Brl%7D%0A%20%20%20%20%5Cmathrm%7Bmaximize%7D%20%26%20%5Csum_%7Bi%2Cj%7D%20z_%7Bij%7D%20%5C%5C%0A%20%20%20%20%5Ctextrm%7Bsubject%20to%7D%20%26%20z_%7Bij%7D%20%5Cleq%20B%20t%20%5Clog_2(1%2B%5Ctilde%7Bp_%7Bi%2Cj%7D%7D%2F(tN_i))%2C%20%5Cquad%20i%20%5Cin%20I%2C%20j%5Cin%20J%2C%20%5C%5C%0A%20%20%20%20%26%20d_jt%20%5Cleq%20%5Csum_i%20z_%7Bij%7D%2C%5Cquad%20j%5Cin%20J%20%5C%5C%0A%20%20%20%20%26%20t%5Csigma%20%2B%20%5Csum_%7Bi%2Cj%7D%20%5Ctilde%7Bp_%7Bi%2Cj%7D%7D%20%3D%201%2C%20%5C%5C%0A%20%20%20%20%26%201%2FP%20%5Cleq%20t%20%5Cleq%201%2F%5Csigma%2C%20%5C%5C%0A%20%20%20%20%26%200%20%5Cleq%20%5Ctilde%7Bp_%7Bi%2Cj%7D%7D%20%5Cleq%20x_%7Bij%7D%2C%20x_%7Bij%7D%5Cin%20%5C%7B0%2C1%5C%7D%2C%20%5C%5C%0A%20%20%20%20%26%20%5Csum_j%20x_%7Bij%7D%20%5Cleq%201%2C%5Cquad%20i%5Cin%20I%2C%0A%20%20%20%20%5Cend%7Barray%7D%0A%20%20%20%20%24%24%0A%0A%20%20%20%20The%20first%20constraint%20can%20equivalently%20be%20written%20as%0A%20%20%20%20%24%24t%2B%5Ctilde%7Bp_%7Bi%2Cj%7D%7D%2FN_i%20%5Cgeq%20t%20%5Cexp(%5Clog(2)z_%7Bi%2Cj%7D%2F(Bt))%24%24%0A%20%20%20%20which%2C%20using%20the%20exponential%20cone%2C%20is%0A%0A%20%20%20%20%24%24(t%2B%5Ctilde%7Bp_%7Bi%2Cj%7D%7D%2FN_i%20%2C%20t%2C%20%5Clog(2)z_%7Bi%2Cj%7D%2FB)%5Cin%20K_%5Cmathrm%7Bexp%7D.%24%24%0A%0A%20%20%20%20%23%20Implementation%20in%20Fusion%0A%0A%20%20%20%20We%20start%20that%20functions%20which%20parse%20examples%20in%20the%20format%20of%20http%3A%2F%2Fwww.research.lancs.ac.uk%2Fportal%2Fen%2Fdatasets%2Fofdma-optimisation(48d843b0-1fb6-4e3d-af39-ca533a37b7ab).html%20and%20set%20up%20some%20global%20constants.%20The%20data%20files%20contain%20user%20demands%20and%20channel%20noise%20for%20each%20example.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20%23%20marimo%3A%20preserve-names%0A%20%20%20%20import%20ast%2C%20sys%0A%0A%20%20%20%20constants%20%3D%20%7B%0A%20%20%20%20%20%20%22System%20Power%22%3A%2010%2C%20%0A%20%20%20%20%20%20%22Bandwidth%22%3A%201.25%2C%20%0A%20%20%20%20%20%20%22Maximum%20Power%22%3A%2036%0A%20%20%20%20%7D%0A%0A%20%20%20%20def%20parse(filename)%3A%0A%20%20%20%20%20%20%20%20data%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20with%20open(filename%2C%20'r')%20as%20file%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20content%20%3D%20file.read()%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20'Instance%3A%20'%20not%20in%20content%3A%20raise%20Exception%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20inst%20in%20content.split('Instance%3A%20')%5B1%3A%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20'noise'%20not%20in%20inst%20or%20'demand'%20not%20in%20inst%3A%20raise%20Exception%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data.append(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22noise%22%20%3A%20ast.literal_eval(inst.split('noise')%5B1%5D.split('demand')%5B0%5D.strip())%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22demand%22%20%3A%20ast.literal_eval(inst.split('demand')%5B1%5D.strip())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20return%20data%20%0A%0A%20%20%20%20BW%20%3D%20constants%5B%22Bandwidth%22%5D%0A%20%20%20%20P%20%3D%20constants%5B%22Maximum%20Power%22%5D%0A%20%20%20%20SIGMA%20%3D%20constants%5B%22System%20Power%22%5D%0A%20%20%20%20return%20BW%2C%20P%2C%20SIGMA%2C%20parse%2C%20sys%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20next%20function%20is%20a%20direct%20implementation%20of%20the%20conic%20model%20above.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(BW%2C%20P%2C%20SIGMA)%3A%0A%20%20%20%20from%20mosek.fusion%20import%20Model%2C%20Domain%2C%20Expr%2C%20ObjectiveSense%2C%20Matrix%2C%20Var%2C%20SolutionStatus%2C%20%20AccSolutionStatus%0A%20%20%20%20import%20mosek.fusion.pythonic%0A%20%20%20%20from%20math%20import%20log%0A%0A%20%20%20%20def%20fsparc_model(n%2C%20d)%3A%0A%20%20%20%20%20%20%20%20M%20%3D%20Model()%0A%20%20%20%20%20%20%20%20I%2C%20J%20%3D%20(len(n)%2C%20len(d))%0A%20%20%20%20%20%20%20%20z%20%3D%20M.variable('z'%2C%20%5BI%2C%20J%5D%2C%20Domain.greaterThan(0.0))%0A%20%20%20%20%20%20%20%20x%20%3D%20M.variable('x'%2C%20%5BI%2C%20J%5D%2C%20Domain.binary())%0A%20%20%20%20%20%20%20%20p_tilde%20%3D%20M.variable('p_tilde'%2C%20%5BI%2C%20J%5D%2C%20Domain.greaterThan(0.0))%0A%20%20%20%20%20%20%20%20t%20%3D%20M.variable('t'%2C%201%2C%20Domain.inRange(1.0%20%2F%20P%2C%201.0%20%2F%20SIGMA))%0A%20%20%20%20%20%20%20%20M.constraint(Expr.sum(x%2C%201)%20%3C%3D%201.0)%0A%20%20%20%20%20%20%20%20M.constraint(SIGMA%20*%20t%20%2B%20Expr.sum(p_tilde)%20%3D%3D%201.0)%0A%20%20%20%20%20%20%20%20M.constraint(p_tilde%20%3C%3D%20x)%0A%20%20%20%20%20%20%20%20M.constraint(Expr.sum(z%2C%200)%20%3E%3D%20Expr.mulElm(Expr.repeat(t%2C%20J%2C%200)%2C%20d))%0A%20%20%20%20%20%20%20%20M.objective('obj'%2C%20ObjectiveSense.Maximize%2C%20Expr.sum(z))%0A%20%20%20%20%20%20%20%20p_over_n%20%3D%20Expr.mulElm(p_tilde%2C%20%5B%5B1%20%2F%20n_i%5D%20*%20J%20for%20n_i%20in%20n%5D)%0A%20%20%20%20%20%20%20%20multi_t%20%3D%20Expr.repeat(Expr.repeat(t%2C%20I%2C%200)%2C%20J%2C%201)%0A%20%20%20%20%20%20%20%20M.constraint(Expr.stack(2%2C%20multi_t%20%2B%20p_over_n%2C%20multi_t%2C%20z%20*%20(log(2.0)%20%2F%20BW))%2C%20Domain.inPExpCone())%0A%20%20%20%20%20%20%20%20return%20M%0A%20%20%20%20return%20AccSolutionStatus%2C%20fsparc_model%2C%20log%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20Next%20we%20run%20the%20model%20and%20present%20some%20statistics%20for%20a%20few%20examples.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(BW%2C%20P%2C%20SIGMA%2C%20log)%3A%0A%20%20%20%20import%20matplotlib.pyplot%20as%20plt%0A%0A%20%20%20%20def%20stats(M%2C%20n%2C%20d)%3A%0A%20%20%20%20%20%20%20%20I%2C%20J%20%3D%20(len(n)%2C%20len(d))%0A%20%20%20%20%20%20%20%20t%20%3D%20M.getVariable('t').level()%5B0%5D%0A%20%20%20%20%20%20%20%20pval%20%3D%20M.getVariable('p_tilde').level().reshape(%5BI%2C%20J%5D)%20%2F%20t%0A%20%20%20%20%20%20%20%20xval%20%3D%20M.getVariable('x').level().reshape(%5BI%2C%20J%5D)%0A%20%20%20%20%20%20%20%20power%20%3D%20%5Bsum(pval%5Bi%2C%20%3A%5D)%20for%20i%20in%20range(I)%5D%0A%20%20%20%20%20%20%20%20user%20%3D%20%5Bint(sum(%5Bxval%5Bi%5D%5Bj%5D%20*%20j%20for%20j%20in%20range(J)%5D))%20for%20i%20in%20range(I)%5D%0A%20%20%20%20%20%20%20%20print('Total%20data%20rate%3A%20demanded%20%7B0%7D%2C%20provided%20%7B1%7D'.format(sum(d)%2C%20sum(%5BBW%20*%20log(1%20%2B%20power%5Bi%5D%20%2F%20n%5Bi%5D)%20%2F%20log(2.0)%20for%20i%20in%20range(I)%5D)))%0A%20%20%20%20%20%20%20%20print('Power%3A%20system%20%7B0%3A.3f%7D%2C%20used%20%7B1%3A.3f%7D%2C%20maximal%3A%20%7B2%3A.3f%7D'.format(SIGMA%2C%20SIGMA%20%2B%20sum(power)%2C%20P))%0A%20%20%20%20%20%20%20%20colors%20%3D%20%5B'red'%2C%20'green'%2C%20'blue'%2C%20'cyan'%2C%20'yellow'%2C%20'violet'%5D%0A%20%20%20%20%20%20%20%20plt.bar(range(I)%2C%20power%2C%20color%3D%5Bcolors%5Buser%5Bi%5D%5D%20for%20i%20in%20range(I)%5D)%0A%20%20%20%20return%20(stats%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%20Example%201%0A%0A%20%20%20%20We%20run%20an%20example%20with%20realistic%20data%20(72%20channels%2C%204%20users)%20with%20a%20very%20short%20time%20limit.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(AccSolutionStatus%2C%20fsparc_model%2C%20parse%2C%20stats%2C%20sys)%3A%0A%20%20%20%20def%20_()%3A%0A%20%20%20%20%20%20%20%20_instance%20%3D%20parse('data%2Flancaster%2F4_0.8.txt')%5B0%5D%0A%20%20%20%20%20%20%20%20n%2C%20d%20%3D%20(_instance%5B'noise'%5D%2C%20_instance%5B'demand'%5D)%0A%20%20%20%20%20%20%20%20M%20%3D%20fsparc_model(n%2C%20d)%0A%20%20%20%20%20%20%20%20M.setLogHandler(sys.stdout)%0A%20%20%20%20%20%20%20%20M.setSolverParam('optimizerMaxTime'%2C%2040.0)%0A%20%20%20%20%20%20%20%20M.solve()%0A%20%20%20%20%20%20%20%20M.acceptedSolutionStatus(AccSolutionStatus.Feasible)%0A%0A%20%20%20%20%20%20%20%20print(M.getPrimalSolutionStatus())%0A%20%20%20%20%20%20%20%20return%20stats(M%2C%20n%2C%20d)%0A%0A%20%20%20%20_()%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20bar%20plot%20shows%20power%20assignments%20to%20the%20channels.%20Each%20color%20represents%20one%20user.%0A%0A%20%20%20%20%23%20Example%202%0A%0A%20%20%20%20The%20next%20example%20is%20a%20small%2C%20randomly%20generated%20set%20of%20data%20with%2015%20channels%20and%203%20users%2C%20which%20we%20should%20solve%20to%20optimality.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(fsparc_model%2C%20parse%2C%20stats%2C%20sys)%3A%0A%20%20%20%20_instance%20%3D%20parse('data%2Fsmall-random%2Frandom_15_3_0.85.txt')%5B0%5D%0A%20%20%20%20n%2C%20d%20%3D%20(_instance%5B'noise'%5D%2C%20_instance%5B'demand'%5D)%0A%20%20%20%20M%20%3D%20fsparc_model(n%2C%20d)%0A%20%20%20%20M.setLogHandler(sys.stdout)%0A%20%20%20%20M.solve()%0A%20%20%20%20stats(M%2C%20n%2C%20d)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%3Ca%20rel%3D%22license%22%20href%3D%22http%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby%2F4.0%2F%22%3E%3Cimg%20alt%3D%22Creative%20Commons%20License%22%20style%3D%22border-width%3A0%22%20src%3D%22https%3A%2F%2Fi.creativecommons.org%2Fl%2Fby%2F4.0%2F80x15.png%22%20%2F%3E%3C%2Fa%3E%3Cbr%20%2F%3EThis%20work%20is%20licensed%20under%20a%20%3Ca%20rel%3D%22license%22%20href%3D%22http%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby%2F4.0%2F%22%3ECreative%20Commons%20Attribution%204.0%20International%20License%3C%2Fa%3E.%20The%20**MOSEK**%20logo%20and%20name%20are%20trademarks%20of%20%3Ca%20href%3D%22http%3A%2F%2Fmosek.com%22%3EMosek%20ApS%3C%2Fa%3E.%20The%20code%20is%20provided%20as-is.%20Compatibility%20with%20future%20release%20of%20**MOSEK**%20or%20the%20%60Fusion%20API%60%20are%20not%20guaranteed.%20For%20more%20information%20contact%20our%20%5Bsupport%5D(mailto%3Asupport%40mosek.com).%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20return%20(mo%2C)%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">6260f98d4bc95385bc123c492e81babb</marimo-code-hash>
</body>
</html>
