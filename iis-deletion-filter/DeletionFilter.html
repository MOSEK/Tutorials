<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        const scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          // Guard against race condition where iframe isn't ready
          if (!obj.contentWindow?.document?.documentElement) {
            return;
          }
          const element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          const newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((_entries) => {
          setHeight();
        });
        // Only observe if iframe content is ready
        if (obj.contentWindow?.document?.body) {
          resizeObserver.observe(obj.contentWindow.document.body);
        }
      }
    </script>
    <marimo-filename hidden>DeletionFilter.py</marimo-filename>
    <!-- TODO(Trevor): Legacy, required by VS Code plugin. Remove when plugin is updated (see marimo/server/_templates/template.py) -->
    <marimo-version data-version="{{ version }}" hidden></marimo-version>
    <marimo-user-config data-config="{{ user_config }}" hidden></marimo-user-config>
    <marimo-server-token data-token="{{ server_token }}" hidden></marimo-server-token>
    <!-- /TODO -->
    <title>DeletionFilter</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/index-3OIHLLq_.js"></script>
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/preload-helper-g1IWzEZ-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chunk-LvLJmgfZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/react-XTZdWHwa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/compiler-runtime-QczY1yfQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useEventListener-4mpeqPxW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/react-dom-BZDtXk6t.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/jsx-runtime-DUsrKwmN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Combination-D2HqSOvH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/clsx-FpJB9huX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cn-Cs2e4A8T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/menu-items-B57SjdWM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/hotkeys-Dh4gy4JD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/button-D8mnDDLX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-Dj-O1Spr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/createLucideIcon-BJ2I6csQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/check-CWbw3kKW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/select-CgZgQ5hV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/multi-map-D3NvLiI9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chevron-right-B_qBg_RU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dropdown-menu-Ciqx4yT-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tooltip-DqNvr2Rw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_Uint8Array-BGESiCQL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_getTag-BWqNuuwU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseIsEqual-C8v2yRqO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/jotai-D74Ef_p1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/invariant-Amh6wt4N.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/isArrayLikeObject-BkJc8lDE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/merge-5YNOh9ZD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/zod-BBqism5D.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/utils-x9KlwLm7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/requests-THIDPq-F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/once-BxRirs3K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toDate-Y5T6FHPx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/isSymbol-BGkTcW3U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toString-DlRqgfqz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseSlice-BoaxdS7L.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_hasUnicode-CNlKPr15.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useLifecycle-8fgb5Nue.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/capitalize-L9-XHPtm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ai-model-dropdown-CO52rzQt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/badge-Cm0WUI-_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/use-toast-DKTyV2AR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/constants-BmIIVBf_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Deferred-9HYzcD3r.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/config-CbG7e0K6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/uuid-B8w6pjWV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/DeferredRequestRegistry-DfLQSvoS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/connection-B11rCPnY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useNonce-D8CLFIrY.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/capabilities-Bdlrhekp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/createReducer-VgoBNe3M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-C3a_7WFa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-0z0sEYV-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BzfTz_Dx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DmruaXMM.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DU0YrNRK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-_bGPtAsk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DsSBESho.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-B2TjmP7E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BzDb7E9f.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/stex-C4ZxI0N3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cjs-Ba5CQnxe.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_arrayReduce-DdxhySYh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/type-kFt-n-jZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseProperty-D0ckTA0L.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toNumber-GB_lFVaq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/now-CAWn5i9V.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/debounce-Bgq-wc7M.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toInteger-Cl1doThW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/main-CC_mbgxK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cells-DoKM12vd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/kbd-EdFdwHEs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/renderShortcut-CLenKJO6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useEvent-l9BzRqpK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDeleteCell-BDBSmjLV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/lazy-Cbg8zRvU.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/defaultLocale-8c1ixjJ_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/precisionRound-CQhbsDNz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/defaultLocale-BECdiY5x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vega-loader.browser-DZ31-605.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tooltip-CSAGVmjx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ErrorBoundary-6EjkHrSV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/alert-dialog-D9SwG8oA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dialog-BPIq0Dmw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDebounce-C9S6xmGh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/numbers-BigybruE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/SSRProvider-DlZbKHsu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/context-CO64Gasq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useNumberFormatter-B5HAJDUq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/usePress-DHxqjtDm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/input-CVoLDDk-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ImperativeModal-ameyIrhc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cell-link-BiAu_8pk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/alert-D5BMn3Et.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/links-Iv0WhyKW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/state-i7G4J1VS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/MarimoErrorOutput-Bh7Bgl2Z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/copy-BS3uwoaq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/copy-DhmkXAPp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/copy-icon-Lyk2_Z8G.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/spinner-DpaQpaiI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-D1pae9A2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/focus-CyxSol0W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/popover-DZBXSGEz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useRunCells-DT1En-Te.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mode-DKDAYLK9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/purify.es-hXMlfS4W.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/RenderHTML-Dlz0Ew2i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/table-CesNYRF-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tabs-BjAbB8w_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/add-missing-import-DV1FOw9w.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useAsyncData-_-DLduEH.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useIframeCapabilities-r0LQMxAQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/LazyAnyLanguageCodeMirror-C7KtNlRp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/error-banner-C9tkg1MX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/formats-C3exma5i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useTheme-DpA-8Qyy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/en-US-Lc4gASCJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/isValid-Cd_L_2Pm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/maps-D4abje2p.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/shim-D-ElLTBO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/download-CCvBQ7qL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/extends-C2lJEiP_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/emotion-is-prop-valid.esm-c4A1huxA.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDateFormatter-BMdQ9MI_.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/katex-BmfUoCWW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/marked.esm-idL59iHw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chunk-T7OEMACY-CdGEwedE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/range-Bbli-TEL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/table-kHJ0xpFt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Output-DxdWGPFi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/name-cell-input-C6ZYU6mN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useHotkey-B0ylhc2m.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CqHWOZu2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BcLYYUSi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BVXr6b5T.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-BrEX5EQl.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CalRK9ms.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-Cc4T7UUX.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-D3MC5WiF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DgaCIZAa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-rqHtY98i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-tj-jaP-y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-w7c0BKrD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CCZcRJI9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-CrDb6akR.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/apl-BQt6lLuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/asciiarmor-BjX7bs0j.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/asn1-xn1MtyoW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/brainfuck-BjO-UY1i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/clike-DW9tQWfF.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/clojure-BSW96HRx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cmake-C7UlMfz3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cobol-CyWIev3Y.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/coffeescript-DTvziYTK.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/commonlisp-yMdkdGMi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/crystal-BGnoSp3z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/css-D7fWzevp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cypher-Cr1dl0Qf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/d-C2bS5bA6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/diff-B2mHQyn6.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dtd-Cy-lUE7p.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dylan-mm60grwk.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ecl-Cqi05Wy1.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/eiffel-FkvfLQq7.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/elm-Da5txHw0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/erlang-CdnCEH5x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/simple-mode-B185hCuE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/factor-CamlR8EJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/forth-UcMX0m31.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/fortran-DZ_vNVsP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/gas-CM88o6Zj.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/gherkin-BhrpTeN9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/groovy-BFju68Wx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/haskell-CrWHY4et.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/haxe-1eKW-tbO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/idl-Do4AwvU2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/javascript-CTXZKRYd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/julia-BRynwHI4.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/livescript-ZmIBNA-I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/lua-mUfZ-MRC.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mathematica-Dil5dTHO.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mbox-Dnkn9wSr.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mirc-auEWieOB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mllike-xVJsauJ8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/modelica-B8kajVDm.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mscgen-Bsnta1jn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/mumps-CMw16b5q.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/nsis-DwPdi8sw.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ntriples-O5lQxirn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/octave-CMfAar-E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/oz-CLRI9Qww.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pascal-D2M_3HBx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/perl-B8lV7aKt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pig-Bima2bfE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/powershell-v_t41ydu.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/properties-ChrStSby.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/protobuf-Bin6kmlf.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pug-UWVdYLYW.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/puppet-DYrtWvYn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/python-BuKrulde.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/q-CrXUTiVN.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/r-Bk2Tiso2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/rpm-CmmZphz3.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ruby-ElyOTVeQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/sas-jE3ZlG0K.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/scheme-CZF1tRbv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/shell-LqT3ZqMa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/sieve-y15yT7Pp.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/smalltalk-pk5PvsMs.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/sparql-DTZ_gfPQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/stylus-CrGj0eNT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/swift-tt3PlBbI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/tcl-1P4b0GMJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/textile-BHDIuMYh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toml-C8qoqk_i.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/troff-DMiF5Zmz.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ttcn-cfg-qLZtNU-E.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ttcn-BAUp3RZn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/turtle-BizIwmKv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vb-Bn_uCxNL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vbscript-BTKW8Atx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/velocity-CcB05fpi.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/verilog-BWdtOJH8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/vhdl-CzFOaOHx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/webidl-DDEKCqSy.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/xquery-BcF6ZhQP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/yacas-BARQAiXa.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/z80-DO_Ep0iT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/esm-DnNh7vdQ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/objectWithoutPropertiesLoose-DDabolgJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/esm-Crqxhl3F.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/trash-Df8Wb7xS.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ConsoleOutput-D8ETq-cc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/icons-BgmgMjOV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/blob-LiDbeYko.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/add-cell-with-ai-85tnyxYo.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/chart-no-axes-column-BrQ3B3xc.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/square-function-D5EEjILG.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/spec-DpllSlJD.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useInstallPackage-BaAhpZlP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/column-preview-DGBk0umL.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useAddCell-DYfGo4T8.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/toggle-PGHtwx2G.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/api-CoLss8_O.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/globals-oV9pRUSB.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/share-DjbnD3WE.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/memoize-DN0TMY36.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/get-CyLJYAfP.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseSet-CKSmZC_I.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/utilities.esm-DvrcU9Ky.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/floating-outline-DmCT2Mvg.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/eye-off-BUwXWtH0.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/plus-CiGrWbgb.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/readonly-python-code-CkaJ4Tks.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/file-video-camera-BGBfFNDn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/file-text-O5IflCIn.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/file-CqXxt3_J.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/types-BMriRmf-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/label-4Nancvon.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/textarea-BnZHy5Jt.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/circle-x-Cc9X6U_B.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/refresh-ccw-aU2rUkrI.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/trash-2-Du5ITnDv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/form-600t_Civ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/field-Dov6YyOV.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/switch-Ct8mUApv.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useBoolean-Dmwks1uh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/useDeepCompareMemoize-C8RdAYFq.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/types-D0WVpW93.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/prop-types-WJwGTMoZ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/es-DAmFxw3U.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/VisuallyHidden-RqykLBKh.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_baseFlatten-rM2FaX4x.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/hasIn-CE-pxQP-.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/_basePickBy-LbasZ8ix.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/pick-FbHfDtcJ.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/send-LAFRRDPT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/code-xml-DdSOsi73.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/download-Dmmu2U4a.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/globe-vMZtva7z.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/refresh-cw-BOc7UXm9.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/settings-DznrHqbd.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/square-DhlBDqyx.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/triangle-alert-Bf1kg4xT.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/dist-DL3W3q-2.js">
    <link rel="modulepreload" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/bundle.esm-C-9IAWQU.js">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/cells-wU8qigWB.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/Output-DUep6sC9.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/ConsoleOutput-BFFTcC5Y.css">
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.18.4/dist/assets/index-CJU5NUvF.css">
  
<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- This is a portal for the data editor to render in -->
    <div id="portal" data-testid="glide-portal" style="position: fixed; left: 0; top: 0; z-index: 9999"></div>
    <script data-marimo="true">
      window.__MARIMO_MOUNT_CONFIG__ = {
            "filename": "DeletionFilter.py",
            "mode": "read",
            "version": "0.18.4",
            "serverToken": "static",
            "config": {"ai": {"models": {"custom_models": [], "displayed_models": []}}, "completion": {"activate_on_typing": true, "copilot": false}, "diagnostics": {"sql_linter": true}, "display": {"cell_output": "below", "code_editor_font_size": 14, "dataframes": "rich", "default_table_max_columns": 50, "default_table_page_size": 10, "default_width": "medium", "reference_highlighting": false, "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "language_servers": {"pylsp": {"enable_flake8": false, "enable_mypy": true, "enable_pydocstyle": false, "enable_pyflakes": false, "enable_pylint": false, "enable_ruff": true, "enabled": false}}, "mcp": {"mcpServers": {}, "presets": []}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": false, "auto_reload": "off", "default_sql_output": "auto", "on_cell_change": "autorun", "output_max_bytes": 8000000, "reactive_tests": true, "std_stream_max_bytes": 1000000, "watcher_on_save": "lazy"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}, "snippets": {"custom_paths": [], "include_default_snippets": true}},
            "configOverrides": {},
            "appConfig": {"sql_output": "auto", "width": "compact"},
            "view": {"showAppCode": true},
            "notebook": {"cells": [{"code": "mo.md(r\"\"\"![MOSEK ApS](https://www.mosek.com/static/images/branding/webgraphmoseklogocolor.png )\"\"\")", "code_hash": "271c93fd1913447fc8645725a5909adb", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Hbol", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n# Irreducible Infeasible Set (IIS)\n\nWhen a large optimization problem is infeasible, it is very common that infeasibility can be localized to a small subset of mutually contradicting constraints. Locating such a small set can help better understand and, if needed, correct the infeasibility issue.\n\nAn *Irreducible Infeasible Subset* (IIS) is, by definition, an infeasible set of constraints such that all its proper subset are feasible. It is therefore a minimal witness of infeasibility. Every infeasible problem has one or more IIS, which may be disjoint or overlapping and can be of different sizes.\n\nIn this notebook we implement a standard method of locating an IIS for linear programs (LPs), namely a *Deletion Filter*. (see [Feasibility and Infeasibility in Optimization](https://link.springer.com/book/10.1007/978-0-387-74932-7)). This algorithm is as follows\n\n- Initialize $S$ to be the set of all constraints.\n- Iterate over all constraints and temporarily remove each from $S$:\n    - If the problem is still infeasible, then permanently remove this constraint from $S$.\n    - If the problem becomes feasible, then put the constraint back to $S$.\n- After iterating through all constraints return $S$ as the IIS.\n\nAs we can see the algorithm will solve as many intermediate problems as there are constraints. If the IIS is small, as it often happens, then the intermediate problems will quickly shrink in size.\n\nThere are many implementation details which we discuss later, together with the code.\n\"\"\"\n)", "code_hash": "be95f9f38bd10903d63fda5218502468", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "MJUe", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n## Implementation with MOSEK ##\n\nThere are many MOSEK-specific implementation details which we now outline.\n\n- We work with the Optimizer API for Python and objects of class ``mosek.Task``. \n- Instead of creating a new task for each iteration of the algorithm we re-use the same task object. \n- Instead of removing constraints from $S$ we make them unbounded by setting their ``boundkey`` to be open in the direction we are testing thus *effectively removing* the bound. When a constraint is supposed to return to $S$ we just restore the original bound.\n- We initialize $S$ with all the effective bounds in the problem: variable upper/lower bounds and constraint upper/lower bounds. A fixed or ranged bound is treated as two bounds (upper and lower) so each of them can participate in the IIS independently. \n- We use the simplex solver to allow efficient hot-starts since we will be solving many similar linear problems sequentially.\n- We allow infeasible linear problems and mixed-integer linear problems whose root relaxation is infeasible.\n\"\"\"\n)", "code_hash": "b9de9ba3646566d6359c41f842ca7947", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "vblA", "name": "_"}, {"code": "from mosek.fusion import Model, Domain, Expr, ObjectiveSense, Matrix, Var, SolutionStatus\nfrom mosek import Task, iparam, optimizertype, miomode, soltype, prosta, boundkey\n\nimport sys, random\n\n# Functions to inspect and transform bounds\nhasup = lambda bk: bk in [boundkey.up, boundkey.ra, boundkey.fx]\nhaslo = lambda bk: bk in [boundkey.lo, boundkey.ra, boundkey.fx]\nrelaxup = lambda bk: boundkey.fr if bk == boundkey.up else boundkey.lo\nrelaxlo = lambda bk: boundkey.fr if bk == boundkey.lo else boundkey.up\n\n# Prepare a task for the deletion filter routine\ndef prepareTask(task):\n    # Use the simplex algporithm to exploit hot-start\n    task.putintparam(iparam.optimizer, optimizertype.free_simplex)\n    # Allow mixed-integer models by working with their continuous relaxation instead\n    task.putintparam(iparam.mio_mode, miomode.ignored)\n    # Remove objective\n    task.putclist(range(task.getnumvar()), [0.0]*task.getnumvar())\n\n# Check if a task is feasible\ndef feasibilityStatus(task):\n    task.optimize()\n    psta = task.getprosta(soltype.bas)\n    if psta in [prosta.prim_and_dual_feas]:\n        return True\n    elif psta in [prosta.prim_infeas]:\n        return False\n    else:\n        return None # Could be numerical issues\n\n# Runs the DeletionFilter on a task, with prescribed ordering of constraints and variables\n# Return: a pair (completed successfully ?, IIS)\ndef deletionFilter(task, order):\n    # We first assume that the IIS consists of everything\n    iis = list(order)\n\n    for (idx, what, bound) in order:\n        getbound = task.getconbound if what == 'c' else task.getvarbound\n        putbound = task.putconbound if what == 'c' else task.putvarbound\n        relaxbound = relaxup if bound == 'u' else relaxlo\n\n        # Inspect the element of the task with index idx, either variable or constraint\n        bk, bl, bu = getbound(idx)\n\n        # Remove the bound completely (make it unbounded) and see if the task becomes feasible\n        putbound(idx, relaxbound(bk), bl, bu)\n        feas = feasibilityStatus(task)\n\n        if feas == True:\n            # Restore the constraint/variable back to its bounds and continue trying the next one\n            putbound(idx, bk, bl, bu)\n        elif feas  == False:\n            # Task is still infeasible, this constraint/variable will be ignored (leave it unbounded)\n            iis.remove((idx, what, bound))\n        else:\n            # None - there were numerical issues, give up and return the current list as IIS\n            return False, iis\n\n    return True, iis", "code_hash": "e2665919826944a022d469493ce42a50", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "bkHC", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n## More implementation details ##\n\nHere are some general considerations when implementing the Deletion Filter algorithm, not specifically related to MOSEK:\n\n- The order in which constraints are tested in the loop affects the resulting IIS. Here we always use a random order, but one could fix specific ordering to put emphasis on various features of the IIS (form example prefer variable bounds to constraint bounds etc.)\n- The intermediate problems can become borderline feasible/infeasible, naturally leading to numerical issues. If that happens we just terminate and return the current $S$.\n\"\"\"\n)", "code_hash": "6547fa0eea52d2ed3203011702e8777a", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "lEQa", "name": "_"}, {"code": "# Computes IIS for a problem\ndef computeIIS(task, method='random'):\n    # Initially solve the problem\n    prepareTask(task)\n    if feasibilityStatus(task) != False:\n        print(\"The task is not infeasible, nothing to do\")\n        return True, []\n\n    # Find all essential (not free) bounds in the problem\n    # Format: (index, constraint or variable ? , lower or upper bound ? )\n    allItems = [(i, 'c', 'u') for i in range(task.getnumcon()) if hasup(task.getconbound(i)[0])] + \\\n               [(i, 'c', 'l') for i in range(task.getnumcon()) if haslo(task.getconbound(i)[0])] + \\\n               [(j, 'v', 'u') for j in range(task.getnumvar()) if hasup(task.getvarbound(j)[0])] + \\\n               [(j, 'v', 'l') for j in range(task.getnumvar()) if haslo(task.getvarbound(j)[0])]               \n\n    if method == 'random':\n        random.shuffle(allItems)\n\n    return deletionFilter(task, allItems)", "code_hash": "0b3a47ab986c6863603d2205bd7e7a1d", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "PKri", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n## Wrapping up and an example ##\n\nFinally we put together all the ingredients and find an IIS for an example from https://docs.mosek.com/latest/pythonapi/debugging-infeas.html\n\"\"\"\n)", "code_hash": "fbc42034be87e3d1e1ed4114a6843a97", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Xref", "name": "_"}, {"code": "# Print a text representation of the IIS\ndef printIIS(task, iis):\n    sgn = lambda x: '-' if x \u003C 0.0 else '+'\n    varname = lambda t, j: t.getvarname(j) if t.getvarnamelen(j) \u003E 0 else f\"x[{j}]\"\n    conname = lambda t, i: f\"{t.getconname(i)}: \" if t.getconnamelen(i) \u003E 0 else \"\"\n    btoineq = lambda b, bl, bu: f\" \u003C= {bu}\" if bound == 'u' else f\" \u003E= {bl}\"\n    for (idx, what, bound) in iis:\n        if what == 'v':\n            bk, bl, bu = task.getvarbound(idx)\n            print(f\"+ {varname(task,idx)}{btoineq(bound, bl, bu)}\") \n        else:\n            bk, bl, bu = task.getconbound(idx)\n            nz, sub, val = task.getarow(idx)\n            expr = ' '.join(f\"{sgn(v)} {abs(v)} {varname(task,j)}\" for (j,v) in zip(list(sub), list(val)))\n            print(f\"{conname(task, idx)}{expr}{btoineq(bound, bl, bu)}\") \n\ndef IISFromPtf(ptftask):\n    with Task() as task:\n        task.readptfstring(ptftask)\n        success, iis = computeIIS(task)    \n\n        if success:\n            print(f\"IIS computation completed successfully, size = {len(iis)}\")\n            printIIS(task, iis)\n        else:\n            print(f\"IIS computation interrupted prematurely because of numerical issues, size = {len(iis)}\")\n\n# Example:\nIISFromPtf(\"\"\"Task\nObjective obj\n    Minimize + x11 + 2 x12 + 5 x23 + 2 x24 + x31 + 2 x33 + x34\nConstraints\n    s0 [-inf;200] + x11 + x12\n    s1 [-inf;1000] + x23 + x24\n    s2 [-inf;1000] + x31 + x33 + x34\n    d0 [1100] + x11 + x31\n    d1 [200] + x12\n    d2 [500] + x23 + x33\n    d3 [500] + x24 + x34\nVariables\n    x11 [0;+inf]\n    x12 [0;+inf]\n    x23 [0;+inf]\n    x24 [0;+inf]\n    x31 [0;+inf]\n    x33 [0;+inf]\n    x34 [0;+inf]\n\"\"\")", "code_hash": "4c3b4783d308d263678cc8765c0b116b", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "SFPL", "name": "_"}, {"code": "mo.md(r\"\"\"The example here represents a supply-demand network. Infeasibility is caused by the fact that stores 1 and 2 have higher joint demand than the plants 1 and 3 can supply. The IIS found reflects this situation. (Note that you can get various IIS when running this example; the smallest and also most straightforward one has size 6).\"\"\")", "code_hash": "a0be8dc9f4e6bc7d01e76cdbf17edd89", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "BYtC", "name": "_"}, {"code": "mo.md(r\"\"\"![MOSEK ApS](https://docs.mosek.com/latest/pythonapi/_images/transportp.png )\"\"\")", "code_hash": "ccf183c3002e78c66a663855e239688c", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "RGSE", "name": "_"}, {"code": "mo.md(\n    r\"\"\"\n## Extensions and improvements ##\n\nThe source code of this Deletion Filter implementation can also be downloaded from the accompanying file [iis_deletion.py](iis_deletion.py). It is a very simple, basic algorithm which we provide as a proof-of-concept example. Here we outline possible extensions one could try:\n\n- Run the deletion filter a few times, possibly in a multithreaded fashion, and take the smallest IIS found.\n- Start not from the full set of constraints, but only from those which appear in the Farkas infeasibility certificate (equivalently are found by the ``task.getinfeasiblesubproblem()`` method.) In fact in many practical cases (especially due to modeling/coding errors and when a certificate is found in presolve) the certificate is already an IIS. Note, however, that this restricts the possible IIS the algorithm can find to those contained in a particular certificate.\n\"\"\"\n)", "code_hash": "befb02add07aa69f9e66115eb6f57985", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "Kclp", "name": "_"}, {"code": "mo.md(r\"\"\"\u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003E\u003Cimg alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/80x15.png\" /\u003E\u003C/a\u003E\u003Cbr /\u003EThis work is licensed under a \u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003ECreative Commons Attribution 4.0 International License\u003C/a\u003E. The **MOSEK** logo and name are trademarks of \u003Ca href=\"http://mosek.com\"\u003EMosek ApS\u003C/a\u003E. The code is provided as-is. Compatibility with future release of **MOSEK** or the `MOSEK Optimizer API for Python` are not guaranteed. For more information contact our [support](mailto:support@mosek.com).\"\"\")", "code_hash": "1b837bb60d0645eee8f5dc229798b3d3", "config": {"column": null, "disabled": false, "hide_code": true}, "id": "emfo", "name": "_"}, {"code": "import marimo as mo", "code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "config": {"column": null, "disabled": false, "hide_code": false}, "id": "Hstk", "name": "_"}], "metadata": {"marimo_version": "0.18.4"}, "version": "1"},
            "session": {"cells": [{"code_hash": "271c93fd1913447fc8645725a5909adb", "console": [], "id": "Hbol", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cimg alt=\"MOSEK ApS\" src=\"https://www.mosek.com/static/images/branding/webgraphmoseklogocolor.png\" /\u003E\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "be95f9f38bd10903d63fda5218502468", "console": [], "id": "MJUe", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch1 id=\"irreducible-infeasible-set-iis\"\u003EIrreducible Infeasible Set (IIS)\u003C/h1\u003E\n\u003Cspan class=\"paragraph\"\u003EWhen a large optimization problem is infeasible, it is very common that infeasibility can be localized to a small subset of mutually contradicting constraints. Locating such a small set can help better understand and, if needed, correct the infeasibility issue.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EAn \u003Cem\u003EIrreducible Infeasible Subset\u003C/em\u003E (IIS) is, by definition, an infeasible set of constraints such that all its proper subset are feasible. It is therefore a minimal witness of infeasibility. Every infeasible problem has one or more IIS, which may be disjoint or overlapping and can be of different sizes.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EIn this notebook we implement a standard method of locating an IIS for linear programs (LPs), namely a \u003Cem\u003EDeletion Filter\u003C/em\u003E. (see \u003Ca href=\"https://link.springer.com/book/10.1007/978-0-387-74932-7\" rel=\"noopener noreferrer\" target=\"_blank\"\u003EFeasibility and Infeasibility in Optimization\u003C/a\u003E). This algorithm is as follows\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003EInitialize \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E to be the set of all constraints.\u003C/li\u003E\n\u003Cli\u003E\n\u003Cspan class=\"paragraph\"\u003EIterate over all constraints and temporarily remove each from \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E:\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003EIf the problem is still infeasible, then permanently remove this constraint from \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E.\u003C/li\u003E\n\u003Cli\u003EIf the problem becomes feasible, then put the constraint back to \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E.\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003Cli\u003EAfter iterating through all constraints return \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E as the IIS.\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cspan class=\"paragraph\"\u003EAs we can see the algorithm will solve as many intermediate problems as there are constraints. If the IIS is small, as it often happens, then the intermediate problems will quickly shrink in size.\u003C/span\u003E\n\u003Cspan class=\"paragraph\"\u003EThere are many implementation details which we discuss later, together with the code.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "b9de9ba3646566d6359c41f842ca7947", "console": [], "id": "vblA", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"implementation-with-mosek\"\u003EImplementation with MOSEK\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EThere are many MOSEK-specific implementation details which we now outline.\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003EWe work with the Optimizer API for Python and objects of class \u003Ccode\u003Emosek.Task\u003C/code\u003E.\u003C/li\u003E\n\u003Cli\u003EInstead of creating a new task for each iteration of the algorithm we re-use the same task object.\u003C/li\u003E\n\u003Cli\u003EInstead of removing constraints from \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E we make them unbounded by setting their \u003Ccode\u003Eboundkey\u003C/code\u003E to be open in the direction we are testing thus \u003Cem\u003Eeffectively removing\u003C/em\u003E the bound. When a constraint is supposed to return to \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E we just restore the original bound.\u003C/li\u003E\n\u003Cli\u003EWe initialize \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E with all the effective bounds in the problem: variable upper/lower bounds and constraint upper/lower bounds. A fixed or ranged bound is treated as two bounds (upper and lower) so each of them can participate in the IIS independently.\u003C/li\u003E\n\u003Cli\u003EWe use the simplex solver to allow efficient hot-starts since we will be solving many similar linear problems sequentially.\u003C/li\u003E\n\u003Cli\u003EWe allow infeasible linear problems and mixed-integer linear problems whose root relaxation is infeasible.\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "e2665919826944a022d469493ce42a50", "console": [], "id": "bkHC", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "6547fa0eea52d2ed3203011702e8777a", "console": [], "id": "lEQa", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"more-implementation-details\"\u003EMore implementation details\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EHere are some general considerations when implementing the Deletion Filter algorithm, not specifically related to MOSEK:\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003EThe order in which constraints are tested in the loop affects the resulting IIS. Here we always use a random order, but one could fix specific ordering to put emphasis on various features of the IIS (form example prefer variable bounds to constraint bounds etc.)\u003C/li\u003E\n\u003Cli\u003EThe intermediate problems can become borderline feasible/infeasible, naturally leading to numerical issues. If that happens we just terminate and return the current \u003Cmarimo-tex class=\"arithmatex\"\u003E||(S||)\u003C/marimo-tex\u003E.\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "0b3a47ab986c6863603d2205bd7e7a1d", "console": [], "id": "PKri", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "fbc42034be87e3d1e1ed4114a6843a97", "console": [], "id": "Xref", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"wrapping-up-and-an-example\"\u003EWrapping up and an example\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EFinally we put together all the ingredients and find an IIS for an example from \u003Ca href=\"https://docs.mosek.com/latest/pythonapi/debugging-infeas.html\" rel=\"noopener noreferrer\" target=\"_blank\"\u003Ehttps://docs.mosek.com/latest/pythonapi/debugging-infeas.html\u003C/a\u003E\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "4c3b4783d308d263678cc8765c0b116b", "console": [{"mimetype": "text/plain", "name": "stdout", "text": "IIS computation completed successfully, size = 7\ns2: + 1.0 x31 + 1.0 x33 + 1.0 x34 \u003C= 1000.0\nd0: + 1.0 x11 + 1.0 x31 \u003E= 1100.0\ns0: + 1.0 x11 + 1.0 x12 \u003C= 200.0\nd3: + 1.0 x24 + 1.0 x34 \u003E= 500.0\ns1: + 1.0 x23 + 1.0 x24 \u003C= 1000.0\nd2: + 1.0 x23 + 1.0 x33 \u003E= 500.0\nd1: + 1.0 x12 \u003E= 200.0\n", "type": "stream"}], "id": "SFPL", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}, {"code_hash": "a0be8dc9f4e6bc7d01e76cdbf17edd89", "console": [], "id": "BYtC", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003EThe example here represents a supply-demand network. Infeasibility is caused by the fact that stores 1 and 2 have higher joint demand than the plants 1 and 3 can supply. The IIS found reflects this situation. (Note that you can get various IIS when running this example; the smallest and also most straightforward one has size 6).\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "ccf183c3002e78c66a663855e239688c", "console": [], "id": "RGSE", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Cimg alt=\"MOSEK ApS\" src=\"https://docs.mosek.com/latest/pythonapi/_images/transportp.png\" /\u003E\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "befb02add07aa69f9e66115eb6f57985", "console": [], "id": "Kclp", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Ch2 id=\"extensions-and-improvements\"\u003EExtensions and improvements\u003C/h2\u003E\n\u003Cspan class=\"paragraph\"\u003EThe source code of this Deletion Filter implementation can also be downloaded from the accompanying file \u003Ca href=\"iis_deletion.py\"\u003Eiis_deletion.py\u003C/a\u003E. It is a very simple, basic algorithm which we provide as a proof-of-concept example. Here we outline possible extensions one could try:\u003C/span\u003E\n\u003Cul\u003E\n\u003Cli\u003ERun the deletion filter a few times, possibly in a multithreaded fashion, and take the smallest IIS found.\u003C/li\u003E\n\u003Cli\u003EStart not from the full set of constraints, but only from those which appear in the Farkas infeasibility certificate (equivalently are found by the \u003Ccode\u003Etask.getinfeasiblesubproblem()\u003C/code\u003E method.) In fact in many practical cases (especially due to modeling/coding errors and when a certificate is found in presolve) the certificate is already an IIS. Note, however, that this restricts the possible IIS the algorithm can find to those contained in a particular certificate.\u003C/li\u003E\n\u003C/ul\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "1b837bb60d0645eee8f5dc229798b3d3", "console": [], "id": "emfo", "outputs": [{"data": {"text/markdown": "\u003Cspan class=\"markdown prose dark:prose-invert contents\"\u003E\u003Cspan class=\"paragraph\"\u003E\u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003E\u003Cimg alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/80x15.png\" /\u003E\u003C/a\u003E\u003Cbr /\u003EThis work is licensed under a \u003Ca rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"\u003ECreative Commons Attribution 4.0 International License\u003C/a\u003E. The \u003Cstrong\u003EMOSEK\u003C/strong\u003E logo and name are trademarks of \u003Ca href=\"http://mosek.com\"\u003EMosek ApS\u003C/a\u003E. The code is provided as-is. Compatibility with future release of \u003Cstrong\u003EMOSEK\u003C/strong\u003E or the \u003Ccode\u003EMOSEK Optimizer API for Python\u003C/code\u003E are not guaranteed. For more information contact our \u003Ca href=\"mailto:support@mosek.com\"\u003Esupport\u003C/a\u003E.\u003C/span\u003E\u003C/span\u003E"}, "type": "data"}]}, {"code_hash": "1d0db38904205bec4d6f6f6a1f6cec3e", "console": [], "id": "Hstk", "outputs": [{"data": {"text/plain": ""}, "type": "data"}]}], "metadata": {"marimo_version": "0.18.4"}, "version": "1"},
            "runtimeConfig": null,
        };
    </script>
  
<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.18.4%22%0Aapp%20%3D%20marimo.App()%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20!%5BMOSEK%20ApS%5D(https%3A%2F%2Fwww.mosek.com%2Fstatic%2Fimages%2Fbranding%2Fwebgraphmoseklogocolor.png%20)%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%20Irreducible%20Infeasible%20Set%20(IIS)%0A%0A%20%20%20%20When%20a%20large%20optimization%20problem%20is%20infeasible%2C%20it%20is%20very%20common%20that%20infeasibility%20can%20be%20localized%20to%20a%20small%20subset%20of%20mutually%20contradicting%20constraints.%20Locating%20such%20a%20small%20set%20can%20help%20better%20understand%20and%2C%20if%20needed%2C%20correct%20the%20infeasibility%20issue.%0A%0A%20%20%20%20An%20*Irreducible%20Infeasible%20Subset*%20(IIS)%20is%2C%20by%20definition%2C%20an%20infeasible%20set%20of%20constraints%20such%20that%20all%20its%20proper%20subset%20are%20feasible.%20It%20is%20therefore%20a%20minimal%20witness%20of%20infeasibility.%20Every%20infeasible%20problem%20has%20one%20or%20more%20IIS%2C%20which%20may%20be%20disjoint%20or%20overlapping%20and%20can%20be%20of%20different%20sizes.%0A%0A%20%20%20%20In%20this%20notebook%20we%20implement%20a%20standard%20method%20of%20locating%20an%20IIS%20for%20linear%20programs%20(LPs)%2C%20namely%20a%20*Deletion%20Filter*.%20(see%20%5BFeasibility%20and%20Infeasibility%20in%20Optimization%5D(https%3A%2F%2Flink.springer.com%2Fbook%2F10.1007%2F978-0-387-74932-7)).%20This%20algorithm%20is%20as%20follows%0A%0A%20%20%20%20-%20Initialize%20%24S%24%20to%20be%20the%20set%20of%20all%20constraints.%0A%20%20%20%20-%20Iterate%20over%20all%20constraints%20and%20temporarily%20remove%20each%20from%20%24S%24%3A%0A%20%20%20%20%20%20%20%20-%20If%20the%20problem%20is%20still%20infeasible%2C%20then%20permanently%20remove%20this%20constraint%20from%20%24S%24.%0A%20%20%20%20%20%20%20%20-%20If%20the%20problem%20becomes%20feasible%2C%20then%20put%20the%20constraint%20back%20to%20%24S%24.%0A%20%20%20%20-%20After%20iterating%20through%20all%20constraints%20return%20%24S%24%20as%20the%20IIS.%0A%0A%20%20%20%20As%20we%20can%20see%20the%20algorithm%20will%20solve%20as%20many%20intermediate%20problems%20as%20there%20are%20constraints.%20If%20the%20IIS%20is%20small%2C%20as%20it%20often%20happens%2C%20then%20the%20intermediate%20problems%20will%20quickly%20shrink%20in%20size.%0A%0A%20%20%20%20There%20are%20many%20implementation%20details%20which%20we%20discuss%20later%2C%20together%20with%20the%20code.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Implementation%20with%20MOSEK%20%23%23%0A%0A%20%20%20%20There%20are%20many%20MOSEK-specific%20implementation%20details%20which%20we%20now%20outline.%0A%0A%20%20%20%20-%20We%20work%20with%20the%20Optimizer%20API%20for%20Python%20and%20objects%20of%20class%20%60%60mosek.Task%60%60.%0A%20%20%20%20-%20Instead%20of%20creating%20a%20new%20task%20for%20each%20iteration%20of%20the%20algorithm%20we%20re-use%20the%20same%20task%20object.%0A%20%20%20%20-%20Instead%20of%20removing%20constraints%20from%20%24S%24%20we%20make%20them%20unbounded%20by%20setting%20their%20%60%60boundkey%60%60%20to%20be%20open%20in%20the%20direction%20we%20are%20testing%20thus%20*effectively%20removing*%20the%20bound.%20When%20a%20constraint%20is%20supposed%20to%20return%20to%20%24S%24%20we%20just%20restore%20the%20original%20bound.%0A%20%20%20%20-%20We%20initialize%20%24S%24%20with%20all%20the%20effective%20bounds%20in%20the%20problem%3A%20variable%20upper%2Flower%20bounds%20and%20constraint%20upper%2Flower%20bounds.%20A%20fixed%20or%20ranged%20bound%20is%20treated%20as%20two%20bounds%20(upper%20and%20lower)%20so%20each%20of%20them%20can%20participate%20in%20the%20IIS%20independently.%0A%20%20%20%20-%20We%20use%20the%20simplex%20solver%20to%20allow%20efficient%20hot-starts%20since%20we%20will%20be%20solving%20many%20similar%20linear%20problems%20sequentially.%0A%20%20%20%20-%20We%20allow%20infeasible%20linear%20problems%20and%20mixed-integer%20linear%20problems%20whose%20root%20relaxation%20is%20infeasible.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20from%20mosek.fusion%20import%20Model%2C%20Domain%2C%20Expr%2C%20ObjectiveSense%2C%20Matrix%2C%20Var%2C%20SolutionStatus%0A%20%20%20%20from%20mosek%20import%20Task%2C%20iparam%2C%20optimizertype%2C%20miomode%2C%20soltype%2C%20prosta%2C%20boundkey%0A%0A%20%20%20%20import%20sys%2C%20random%0A%0A%20%20%20%20%23%20Functions%20to%20inspect%20and%20transform%20bounds%0A%20%20%20%20hasup%20%3D%20lambda%20bk%3A%20bk%20in%20%5Bboundkey.up%2C%20boundkey.ra%2C%20boundkey.fx%5D%0A%20%20%20%20haslo%20%3D%20lambda%20bk%3A%20bk%20in%20%5Bboundkey.lo%2C%20boundkey.ra%2C%20boundkey.fx%5D%0A%20%20%20%20relaxup%20%3D%20lambda%20bk%3A%20boundkey.fr%20if%20bk%20%3D%3D%20boundkey.up%20else%20boundkey.lo%0A%20%20%20%20relaxlo%20%3D%20lambda%20bk%3A%20boundkey.fr%20if%20bk%20%3D%3D%20boundkey.lo%20else%20boundkey.up%0A%0A%20%20%20%20%23%20Prepare%20a%20task%20for%20the%20deletion%20filter%20routine%0A%20%20%20%20def%20prepareTask(task)%3A%0A%20%20%20%20%20%20%20%20%23%20Use%20the%20simplex%20algporithm%20to%20exploit%20hot-start%0A%20%20%20%20%20%20%20%20task.putintparam(iparam.optimizer%2C%20optimizertype.free_simplex)%0A%20%20%20%20%20%20%20%20%23%20Allow%20mixed-integer%20models%20by%20working%20with%20their%20continuous%20relaxation%20instead%0A%20%20%20%20%20%20%20%20task.putintparam(iparam.mio_mode%2C%20miomode.ignored)%0A%20%20%20%20%20%20%20%20%23%20Remove%20objective%0A%20%20%20%20%20%20%20%20task.putclist(range(task.getnumvar())%2C%20%5B0.0%5D*task.getnumvar())%0A%0A%20%20%20%20%23%20Check%20if%20a%20task%20is%20feasible%0A%20%20%20%20def%20feasibilityStatus(task)%3A%0A%20%20%20%20%20%20%20%20task.optimize()%0A%20%20%20%20%20%20%20%20psta%20%3D%20task.getprosta(soltype.bas)%0A%20%20%20%20%20%20%20%20if%20psta%20in%20%5Bprosta.prim_and_dual_feas%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20True%0A%20%20%20%20%20%20%20%20elif%20psta%20in%20%5Bprosta.prim_infeas%5D%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20False%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20None%20%23%20Could%20be%20numerical%20issues%0A%0A%20%20%20%20%23%20Runs%20the%20DeletionFilter%20on%20a%20task%2C%20with%20prescribed%20ordering%20of%20constraints%20and%20variables%0A%20%20%20%20%23%20Return%3A%20a%20pair%20(completed%20successfully%20%3F%2C%20IIS)%0A%20%20%20%20def%20deletionFilter(task%2C%20order)%3A%0A%20%20%20%20%20%20%20%20%23%20We%20first%20assume%20that%20the%20IIS%20consists%20of%20everything%0A%20%20%20%20%20%20%20%20iis%20%3D%20list(order)%0A%0A%20%20%20%20%20%20%20%20for%20(idx%2C%20what%2C%20bound)%20in%20order%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20getbound%20%3D%20task.getconbound%20if%20what%20%3D%3D%20'c'%20else%20task.getvarbound%0A%20%20%20%20%20%20%20%20%20%20%20%20putbound%20%3D%20task.putconbound%20if%20what%20%3D%3D%20'c'%20else%20task.putvarbound%0A%20%20%20%20%20%20%20%20%20%20%20%20relaxbound%20%3D%20relaxup%20if%20bound%20%3D%3D%20'u'%20else%20relaxlo%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Inspect%20the%20element%20of%20the%20task%20with%20index%20idx%2C%20either%20variable%20or%20constraint%0A%20%20%20%20%20%20%20%20%20%20%20%20bk%2C%20bl%2C%20bu%20%3D%20getbound(idx)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%23%20Remove%20the%20bound%20completely%20(make%20it%20unbounded)%20and%20see%20if%20the%20task%20becomes%20feasible%0A%20%20%20%20%20%20%20%20%20%20%20%20putbound(idx%2C%20relaxbound(bk)%2C%20bl%2C%20bu)%0A%20%20%20%20%20%20%20%20%20%20%20%20feas%20%3D%20feasibilityStatus(task)%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20feas%20%3D%3D%20True%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Restore%20the%20constraint%2Fvariable%20back%20to%20its%20bounds%20and%20continue%20trying%20the%20next%20one%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20putbound(idx%2C%20bk%2C%20bl%2C%20bu)%0A%20%20%20%20%20%20%20%20%20%20%20%20elif%20feas%20%20%3D%3D%20False%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Task%20is%20still%20infeasible%2C%20this%20constraint%2Fvariable%20will%20be%20ignored%20(leave%20it%20unbounded)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20iis.remove((idx%2C%20what%2C%20bound))%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20None%20-%20there%20were%20numerical%20issues%2C%20give%20up%20and%20return%20the%20current%20list%20as%20IIS%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20False%2C%20iis%0A%0A%20%20%20%20%20%20%20%20return%20True%2C%20iis%0A%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20Task%2C%0A%20%20%20%20%20%20%20%20deletionFilter%2C%0A%20%20%20%20%20%20%20%20feasibilityStatus%2C%0A%20%20%20%20%20%20%20%20haslo%2C%0A%20%20%20%20%20%20%20%20hasup%2C%0A%20%20%20%20%20%20%20%20prepareTask%2C%0A%20%20%20%20%20%20%20%20random%2C%0A%20%20%20%20)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20More%20implementation%20details%20%23%23%0A%0A%20%20%20%20Here%20are%20some%20general%20considerations%20when%20implementing%20the%20Deletion%20Filter%20algorithm%2C%20not%20specifically%20related%20to%20MOSEK%3A%0A%0A%20%20%20%20-%20The%20order%20in%20which%20constraints%20are%20tested%20in%20the%20loop%20affects%20the%20resulting%20IIS.%20Here%20we%20always%20use%20a%20random%20order%2C%20but%20one%20could%20fix%20specific%20ordering%20to%20put%20emphasis%20on%20various%20features%20of%20the%20IIS%20(form%20example%20prefer%20variable%20bounds%20to%20constraint%20bounds%20etc.)%0A%20%20%20%20-%20The%20intermediate%20problems%20can%20become%20borderline%20feasible%2Finfeasible%2C%20naturally%20leading%20to%20numerical%20issues.%20If%20that%20happens%20we%20just%20terminate%20and%20return%20the%20current%20%24S%24.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(deletionFilter%2C%20feasibilityStatus%2C%20haslo%2C%20hasup%2C%20prepareTask%2C%20random)%3A%0A%20%20%20%20%23%20Computes%20IIS%20for%20a%20problem%0A%20%20%20%20def%20computeIIS(task%2C%20method%3D'random')%3A%0A%20%20%20%20%20%20%20%20%23%20Initially%20solve%20the%20problem%0A%20%20%20%20%20%20%20%20prepareTask(task)%0A%20%20%20%20%20%20%20%20if%20feasibilityStatus(task)%20!%3D%20False%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20print(%22The%20task%20is%20not%20infeasible%2C%20nothing%20to%20do%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20True%2C%20%5B%5D%0A%0A%20%20%20%20%20%20%20%20%23%20Find%20all%20essential%20(not%20free)%20bounds%20in%20the%20problem%0A%20%20%20%20%20%20%20%20%23%20Format%3A%20(index%2C%20constraint%20or%20variable%20%3F%20%2C%20lower%20or%20upper%20bound%20%3F%20)%0A%20%20%20%20%20%20%20%20allItems%20%3D%20%5B(i%2C%20'c'%2C%20'u')%20for%20i%20in%20range(task.getnumcon())%20if%20hasup(task.getconbound(i)%5B0%5D)%5D%20%2B%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B(i%2C%20'c'%2C%20'l')%20for%20i%20in%20range(task.getnumcon())%20if%20haslo(task.getconbound(i)%5B0%5D)%5D%20%2B%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B(j%2C%20'v'%2C%20'u')%20for%20j%20in%20range(task.getnumvar())%20if%20hasup(task.getvarbound(j)%5B0%5D)%5D%20%2B%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B(j%2C%20'v'%2C%20'l')%20for%20j%20in%20range(task.getnumvar())%20if%20haslo(task.getvarbound(j)%5B0%5D)%5D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20%20%20%20%20if%20method%20%3D%3D%20'random'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20random.shuffle(allItems)%0A%0A%20%20%20%20%20%20%20%20return%20deletionFilter(task%2C%20allItems)%0A%20%20%20%20return%20(computeIIS%2C)%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Wrapping%20up%20and%20an%20example%20%23%23%0A%0A%20%20%20%20Finally%20we%20put%20together%20all%20the%20ingredients%20and%20find%20an%20IIS%20for%20an%20example%20from%20https%3A%2F%2Fdocs.mosek.com%2Flatest%2Fpythonapi%2Fdebugging-infeas.html%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_(Task%2C%20computeIIS)%3A%0A%20%20%20%20%23%20Print%20a%20text%20representation%20of%20the%20IIS%0A%20%20%20%20def%20printIIS(task%2C%20iis)%3A%0A%20%20%20%20%20%20%20%20sgn%20%3D%20lambda%20x%3A%20'-'%20if%20x%20%3C%200.0%20else%20'%2B'%0A%20%20%20%20%20%20%20%20varname%20%3D%20lambda%20t%2C%20j%3A%20t.getvarname(j)%20if%20t.getvarnamelen(j)%20%3E%200%20else%20f%22x%5B%7Bj%7D%5D%22%0A%20%20%20%20%20%20%20%20conname%20%3D%20lambda%20t%2C%20i%3A%20f%22%7Bt.getconname(i)%7D%3A%20%22%20if%20t.getconnamelen(i)%20%3E%200%20else%20%22%22%0A%20%20%20%20%20%20%20%20btoineq%20%3D%20lambda%20b%2C%20bl%2C%20bu%3A%20f%22%20%3C%3D%20%7Bbu%7D%22%20if%20bound%20%3D%3D%20'u'%20else%20f%22%20%3E%3D%20%7Bbl%7D%22%0A%20%20%20%20%20%20%20%20for%20(idx%2C%20what%2C%20bound)%20in%20iis%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20what%20%3D%3D%20'v'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bk%2C%20bl%2C%20bu%20%3D%20task.getvarbound(idx)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22%2B%20%7Bvarname(task%2Cidx)%7D%7Bbtoineq(bound%2C%20bl%2C%20bu)%7D%22)%20%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bk%2C%20bl%2C%20bu%20%3D%20task.getconbound(idx)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nz%2C%20sub%2C%20val%20%3D%20task.getarow(idx)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20expr%20%3D%20'%20'.join(f%22%7Bsgn(v)%7D%20%7Babs(v)%7D%20%7Bvarname(task%2Cj)%7D%22%20for%20(j%2Cv)%20in%20zip(list(sub)%2C%20list(val)))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22%7Bconname(task%2C%20idx)%7D%7Bexpr%7D%7Bbtoineq(bound%2C%20bl%2C%20bu)%7D%22)%20%0A%0A%20%20%20%20def%20IISFromPtf(ptftask)%3A%0A%20%20%20%20%20%20%20%20with%20Task()%20as%20task%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20task.readptfstring(ptftask)%0A%20%20%20%20%20%20%20%20%20%20%20%20success%2C%20iis%20%3D%20computeIIS(task)%20%20%20%20%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20success%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22IIS%20computation%20completed%20successfully%2C%20size%20%3D%20%7Blen(iis)%7D%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20printIIS(task%2C%20iis)%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print(f%22IIS%20computation%20interrupted%20prematurely%20because%20of%20numerical%20issues%2C%20size%20%3D%20%7Blen(iis)%7D%22)%0A%0A%20%20%20%20%23%20Example%3A%0A%20%20%20%20IISFromPtf(%22%22%22Task%0A%20%20%20%20Objective%20obj%0A%20%20%20%20%20%20%20%20Minimize%20%2B%20x11%20%2B%202%20x12%20%2B%205%20x23%20%2B%202%20x24%20%2B%20x31%20%2B%202%20x33%20%2B%20x34%0A%20%20%20%20Constraints%0A%20%20%20%20%20%20%20%20s0%20%5B-inf%3B200%5D%20%2B%20x11%20%2B%20x12%0A%20%20%20%20%20%20%20%20s1%20%5B-inf%3B1000%5D%20%2B%20x23%20%2B%20x24%0A%20%20%20%20%20%20%20%20s2%20%5B-inf%3B1000%5D%20%2B%20x31%20%2B%20x33%20%2B%20x34%0A%20%20%20%20%20%20%20%20d0%20%5B1100%5D%20%2B%20x11%20%2B%20x31%0A%20%20%20%20%20%20%20%20d1%20%5B200%5D%20%2B%20x12%0A%20%20%20%20%20%20%20%20d2%20%5B500%5D%20%2B%20x23%20%2B%20x33%0A%20%20%20%20%20%20%20%20d3%20%5B500%5D%20%2B%20x24%20%2B%20x34%0A%20%20%20%20Variables%0A%20%20%20%20%20%20%20%20x11%20%5B0%3B%2Binf%5D%0A%20%20%20%20%20%20%20%20x12%20%5B0%3B%2Binf%5D%0A%20%20%20%20%20%20%20%20x23%20%5B0%3B%2Binf%5D%0A%20%20%20%20%20%20%20%20x24%20%5B0%3B%2Binf%5D%0A%20%20%20%20%20%20%20%20x31%20%5B0%3B%2Binf%5D%0A%20%20%20%20%20%20%20%20x33%20%5B0%3B%2Binf%5D%0A%20%20%20%20%20%20%20%20x34%20%5B0%3B%2Binf%5D%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20The%20example%20here%20represents%20a%20supply-demand%20network.%20Infeasibility%20is%20caused%20by%20the%20fact%20that%20stores%201%20and%202%20have%20higher%20joint%20demand%20than%20the%20plants%201%20and%203%20can%20supply.%20The%20IIS%20found%20reflects%20this%20situation.%20(Note%20that%20you%20can%20get%20various%20IIS%20when%20running%20this%20example%3B%20the%20smallest%20and%20also%20most%20straightforward%20one%20has%20size%206).%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20!%5BMOSEK%20ApS%5D(https%3A%2F%2Fdocs.mosek.com%2Flatest%2Fpythonapi%2F_images%2Ftransportp.png%20)%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%23%23%20Extensions%20and%20improvements%20%23%23%0A%0A%20%20%20%20The%20source%20code%20of%20this%20Deletion%20Filter%20implementation%20can%20also%20be%20downloaded%20from%20the%20accompanying%20file%20%5Biis_deletion.py%5D(iis_deletion.py).%20It%20is%20a%20very%20simple%2C%20basic%20algorithm%20which%20we%20provide%20as%20a%20proof-of-concept%20example.%20Here%20we%20outline%20possible%20extensions%20one%20could%20try%3A%0A%0A%20%20%20%20-%20Run%20the%20deletion%20filter%20a%20few%20times%2C%20possibly%20in%20a%20multithreaded%20fashion%2C%20and%20take%20the%20smallest%20IIS%20found.%0A%20%20%20%20-%20Start%20not%20from%20the%20full%20set%20of%20constraints%2C%20but%20only%20from%20those%20which%20appear%20in%20the%20Farkas%20infeasibility%20certificate%20(equivalently%20are%20found%20by%20the%20%60%60task.getinfeasiblesubproblem()%60%60%20method.)%20In%20fact%20in%20many%20practical%20cases%20(especially%20due%20to%20modeling%2Fcoding%20errors%20and%20when%20a%20certificate%20is%20found%20in%20presolve)%20the%20certificate%20is%20already%20an%20IIS.%20Note%2C%20however%2C%20that%20this%20restricts%20the%20possible%20IIS%20the%20algorithm%20can%20find%20to%20those%20contained%20in%20a%20particular%20certificate.%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell(hide_code%3DTrue)%0Adef%20_(mo)%3A%0A%20%20%20%20mo.md(r%22%22%22%0A%20%20%20%20%3Ca%20rel%3D%22license%22%20href%3D%22http%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby%2F4.0%2F%22%3E%3Cimg%20alt%3D%22Creative%20Commons%20License%22%20style%3D%22border-width%3A0%22%20src%3D%22https%3A%2F%2Fi.creativecommons.org%2Fl%2Fby%2F4.0%2F80x15.png%22%20%2F%3E%3C%2Fa%3E%3Cbr%20%2F%3EThis%20work%20is%20licensed%20under%20a%20%3Ca%20rel%3D%22license%22%20href%3D%22http%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby%2F4.0%2F%22%3ECreative%20Commons%20Attribution%204.0%20International%20License%3C%2Fa%3E.%20The%20**MOSEK**%20logo%20and%20name%20are%20trademarks%20of%20%3Ca%20href%3D%22http%3A%2F%2Fmosek.com%22%3EMosek%20ApS%3C%2Fa%3E.%20The%20code%20is%20provided%20as-is.%20Compatibility%20with%20future%20release%20of%20**MOSEK**%20or%20the%20%60MOSEK%20Optimizer%20API%20for%20Python%60%20are%20not%20guaranteed.%20For%20more%20information%20contact%20our%20%5Bsupport%5D(mailto%3Asupport%40mosek.com).%0A%20%20%20%20%22%22%22)%0A%20%20%20%20return%0A%0A%0A%40app.cell%0Adef%20_()%3A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20return%20(mo%2C)%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">b03328b6b119604fbecdf78cb86b38f0</marimo-code-hash>
</body>
</html>
